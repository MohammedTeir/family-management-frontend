import{t as K,r as v,c as Q,a as O,b as z,v as X,w as F,i as Y,j as e,L as Z,B as I,U as ee,C as m,e as x,f as b,d as j,x as l,I as t,y as J,S as w,m as H,n as T,p as A,q as o,g as se,k as ae,h as re,z as W,A as ie,D as G,E as le,F as ne,G as d,H as p,J as P}from"./index-ZYzdAsGm.js";import{S as u}from"./switch-DBFXyOxO.js";import{a as N}from"./dropdown-menu-C5FzIU9D.js";import{H as M}from"./header-qJrll5lw.js";import{f as q,a as te}from"./ar-DxfRqTnb.js";const de=le({husbandName:d({required_error:"الاسم مطلوب",invalid_type_error:"الاسم يجب أن يكون نص"}).min(1,"الاسم مطلوب"),husbandID:d({required_error:"رقم الهوية مطلوب",invalid_type_error:"رقم الهوية يجب أن يكون نص"}).regex(/^\d{9}$/,"رقم الهوية يجب أن يكون 9 أرقام"),husbandBirthDate:d({required_error:"تاريخ الميلاد مطلوب",invalid_type_error:"تاريخ الميلاد يجب أن يكون نص"}).min(1,"تاريخ الميلاد مطلوب"),husbandJob:d({required_error:"المهنة مطلوبة",invalid_type_error:"المهنة يجب أن تكون نص"}).min(1,"المهنة مطلوبة"),primaryPhone:d({required_error:"رقم الجوال مطلوب",invalid_type_error:"رقم الجوال يجب أن يكون نص"}).regex(/^(?:\d{9}|\d{10})$/,"رقم الجوال يجب أن يكون 9 أو 10 أرقام"),secondaryPhone:d({invalid_type_error:"رقم الجوال البديل يجب أن يكون نص"}).nullable().optional(),spouseName:d({invalid_type_error:"اسم الزوج/ة يجب أن يكون نص"}).nullable().optional(),spouseID:d({invalid_type_error:"رقم هوية الزوج/ة يجب أن يكون نص"}).regex(/^\d{9}$/,"رقم هوية الزوج/ة يجب أن يكون 9 أرقام").nullable().optional(),spouseBirthDate:d({invalid_type_error:"تاريخ ميلاد الزوج/ة يجب أن يكون نص"}).nullable().optional(),spouseJob:d({invalid_type_error:"مهنة الزوج/ة يجب أن تكون نص"}).nullable().optional(),spousePregnant:p({invalid_type_error:"حقل الحمل يجب أن يكون صحيح أو خطأ"}).default(!1),originalResidence:d({required_error:"السكن الأصلي مطلوب",invalid_type_error:"السكن الأصلي يجب أن يكون نص"}).min(1,"السكن الأصلي مطلوب"),currentHousing:d({required_error:"السكن الحالي مطلوب",invalid_type_error:"السكن الحالي يجب أن يكون نص"}).min(1,"السكن الحالي مطلوب"),isDisplaced:p({invalid_type_error:"حقل النزوح يجب أن يكون صحيح أو خطأ"}).default(!1),displacedLocation:d({invalid_type_error:"موقع النزوح يجب أن يكون نص"}).nullable().optional(),isAbroad:p({invalid_type_error:"حقل الاغتراب يجب أن يكون صحيح أو خطأ"}).default(!1),warDamage2023:p({invalid_type_error:"حقل أضرار 2023 يجب أن يكون صحيح أو خطأ"}).default(!1),warDamageDescription:d({invalid_type_error:"وصف الأضرار يجب أن يكون نص"}).nullable().optional(),branch:d({invalid_type_error:"الفرع يجب أن يكون نص"}).nullable().optional(),landmarkNear:d({invalid_type_error:"أقرب معلم يجب أن يكون نص"}).nullable().optional(),socialStatus:d({invalid_type_error:"الحالة الاجتماعية يجب أن تكون نص"}).nullable().optional(),totalMembers:P.number({required_error:"عدد الأفراد مطلوب",invalid_type_error:"عدد الأفراد يجب أن يكون رقم"}).min(1,"عدد الأفراد مطلوب"),numMales:P.number({required_error:"عدد الذكور مطلوب",invalid_type_error:"عدد الذكور يجب أن يكون رقم"}).min(0,"عدد الذكور مطلوب"),numFemales:P.number({required_error:"عدد الإناث مطلوب",invalid_type_error:"عدد الإنات يجب أن يكون رقم"}).min(0,"عدد الإنات مطلوب"),hasChronicIllness:p().default(!1),chronicIllnessType:d({invalid_type_error:"نوع المرض المزمن يجب أن يكون نص"}).nullable().optional(),spouseHasChronicIllness:p().default(!1),spouseChronicIllnessType:d({invalid_type_error:"نوع مرض الزوج/ة المزمن يجب أن يكون نص"}).nullable().optional(),hasDisability:p().default(!1),disabilityType:d({invalid_type_error:"نوع الإعاقة يجب أن يكون نص"}).nullable().optional(),spouseHasDisability:p().default(!1),spouseDisabilityType:d({invalid_type_error:"نوع إعاقة الزوج/ة يجب أن يكون نص"}).nullable().optional(),hasWarInjury:p().default(!1),warInjuryType:d({invalid_type_error:"نوع إصابة الحرب يجب أن يكون نص"}).nullable().optional(),spouseHasWarInjury:p().default(!1),spouseWarInjuryType:d({invalid_type_error:"نوع إصابة الحرب للزوج/ة يجب أن يكون نص"}).nullable().optional(),headGender:ne(["male","female"]).optional()}).refine(c=>!(c.headGender==="female"&&(!c.spouseName||c.spouseName.trim()==="")||c.headGender==="female"&&(!c.spouseID||c.spouseID.trim()==="")),{message:"بيانات الزوج مطلوبة عندما تكون رب الأسرة أنثى",path:["spouseName"]});function be(){const{toast:c}=K(),[i,D]=v.useState(!1),[oe,ce]=v.useState(null),{data:s,isLoading:C}=Q({queryKey:["/api/family"],select:a=>{if(!a)return a;const n=a.userGender||"male";return{...a,...a.spouse?{...n==="female"?{spouseAsHusbandName:a.spouse.husbandName||a.spouse.wifeName,spouseAsHusbandID:a.spouse.husbandID||a.spouse.wifeID,spouseAsHusbandBirthDate:a.spouse.husbandBirthDate||a.spouse.wifeBirthDate,spouseAsHusbandJob:a.spouse.husbandJob||a.spouse.wifeJob,spouseAsHusbandPregnant:a.spouse.husbandPregnant||a.spouse.wifePregnant,spouseAsHusbandHasChronicIllness:a.spouse.husbandHasChronicIllness||a.spouse.wifeHasChronicIllness,spouseAsHusbandChronicIllnessType:a.spouse.husbandChronicIllnessType||a.spouse.wifeChronicIllnessType,spouseAsHusbandHasDisability:a.spouse.husbandHasDisability||a.spouse.wifeHasDisability,spouseAsHusbandDisabilityType:a.spouse.husbandDisabilityType||a.spouse.wifeDisabilityType,spouseAsHusbandHasWarInjury:a.spouse.husbandHasWarInjury||a.spouse.wifeHasWarInjury,spouseAsHusbandWarInjuryType:a.spouse.husbandWarInjuryType||a.spouse.wifeWarInjuryType}:{spouseAsWifeName:a.spouse.wifeName,spouseAsWifeID:a.spouse.wifeID,spouseAsWifeBirthDate:a.spouse.wifeBirthDate,spouseAsWifeJob:a.spouse.wifeJob,spouseAsWifePregnant:a.spouse.wifePregnant,spouseAsWifeHasChronicIllness:a.spouse.wifeHasChronicIllness,spouseAsWifeChronicIllnessType:a.spouse.wifeChronicIllnessType,spouseAsWifeHasDisability:a.spouse.wifeHasDisability,spouseAsWifeDisabilityType:a.spouse.wifeDisabilityType,spouseAsWifeHasWarInjury:a.spouse.wifeHasWarInjury,spouseAsWifeWarInjuryType:a.spouse.wifeWarInjuryType}}:a.wifeName?{...n==="female"?{spouseAsHusbandName:a.wifeName,spouseAsHusbandID:a.wifeID,spouseAsHusbandBirthDate:a.wifeBirthDate,spouseAsHusbandJob:a.wifeJob,spouseAsHusbandPregnant:a.wifePregnant,spouseAsHusbandHasChronicIllness:a.wifeHasChronicIllness,spouseAsHusbandChronicIllnessType:a.wifeChronicIllnessType,spouseAsHusbandHasDisability:a.wifeHasDisability,spouseAsHusbandDisabilityType:a.wifeDisabilityType,spouseAsHusbandHasWarInjury:a.wifeHasWarInjury,spouseAsHusbandWarInjuryType:a.wifeWarInjuryType}:{spouseAsWifeName:a.wifeName,spouseAsWifeID:a.wifeID,spouseAsWifeBirthDate:a.wifeBirthDate,spouseAsWifeJob:a.wifeJob,spouseAsWifePregnant:a.wifePregnant,spouseAsWifeHasChronicIllness:a.wifeHasChronicIllness,spouseAsWifeChronicIllnessType:a.wifeChronicIllnessType,spouseAsWifeHasDisability:a.wifeHasDisability,spouseAsWifeDisabilityType:a.wifeDisabilityType,spouseAsWifeHasWarInjury:a.wifeHasWarInjury,spouseAsWifeWarInjuryType:a.wifeWarInjuryType}}:{},headGender:n}}});O();const{settings:f}=z(),r=X({resolver:ie(de),defaultValues:{husbandName:"",husbandID:"",husbandBirthDate:"",husbandJob:"",primaryPhone:"",secondaryPhone:"",spouseName:"",spouseID:"",spouseBirthDate:"",spouseJob:"",spousePregnant:!1,originalResidence:"",currentHousing:"",isDisplaced:!1,displacedLocation:"",isAbroad:!1,warDamage2023:!1,warDamageDescription:"",branch:"",landmarkNear:"",socialStatus:"",totalMembers:0,numMales:0,numFemales:0,hasChronicIllness:!1,chronicIllnessType:"",spouseHasChronicIllness:!1,spouseChronicIllnessType:"",hasDisability:!1,disabilityType:"",spouseHasDisability:!1,spouseDisabilityType:"",hasWarInjury:!1,warInjuryType:"",spouseHasWarInjury:!1,spouseWarInjuryType:"",headGender:"male"}}),S=r.watch("branch"),V=r.watch("socialStatus"),E=r.watch("warDamageDescription");v.useEffect(()=>{if(s){const a=s.headGender||s.userGender||"male",n={...s,headGender:a,husbandName:s.husbandName||"",husbandID:s.husbandID||"",husbandBirthDate:s.husbandBirthDate?$(s.husbandBirthDate):"",husbandJob:s.husbandJob||"",spouseName:(a==="female"?s.spouseAsHusbandName:s.spouseAsWifeName)||"",spouseID:(a==="female"?s.spouseAsHusbandID:s.spouseAsWifeID)||"",spouseBirthDate:(a==="female"?s.spouseAsHusbandBirthDate:s.spouseAsWifeBirthDate)||"",spouseJob:(a==="female"?s.spouseAsHusbandJob:s.spouseAsWifeJob)||"",spousePregnant:(a==="female"?s.spouseAsHusbandPregnant:s.spouseAsWifePregnant)||!1,spouseHasChronicIllness:(a==="female"?s.spouseAsHusbandHasChronicIllness:s.spouseAsWifeHasChronicIllness)||!1,spouseChronicIllnessType:(a==="female"?s.spouseAsHusbandChronicIllnessType:s.spouseAsWifeChronicIllnessType)||"",spouseHasDisability:(a==="female"?s.spouseAsHusbandHasDisability:s.spouseAsWifeHasDisability)||!1,spouseDisabilityType:(a==="female"?s.spouseAsHusbandDisabilityType:s.spouseAsWifeDisabilityType)||"",spouseHasWarInjury:(a==="female"?s.spouseAsHusbandHasWarInjury:s.spouseAsWifeHasWarInjury)||!1,spouseWarInjuryType:(a==="female"?s.spouseAsHusbandWarInjuryType:s.spouseAsWifeWarInjuryType)||"",socialStatus:s.socialStatus||"",branch:s.branch||"",warDamageDescription:s.warDamageDescription||"",hasChronicIllness:s.hasChronicIllness||!1,chronicIllnessType:s.chronicIllnessType||"",hasDisability:s.hasDisability||!1,disabilityType:s.disabilityType||"",hasWarInjury:s.hasWarInjury||!1,warInjuryType:s.warInjuryType||""};r.reset(n)}},[s,r]),v.useEffect(()=>{f.siteTitle&&(document.title=f.siteTitle),f.language&&(document.documentElement.lang=f.language,document.body.dir=f.language==="ar"?"rtl":"ltr")},[f.siteTitle,f.language]);const y=F({mutationFn:async a=>(await W("PUT",`/api/family/${s.id}`,a)).data,onSuccess:()=>{G.invalidateQueries({queryKey:["/api/family"]}),D(!1),c({title:"تم التحديث بنجاح",description:"تم حفظ بيانات الأسرة"})},onError:a=>{c({title:"خطأ في التحديث",description:a.message,variant:"destructive"})}}),_=F({mutationFn:async a=>(await W("POST","/api/family",a)).data,onSuccess:()=>{G.invalidateQueries({queryKey:["/api/family"]}),D(!1),c({title:"تم الإنشاء بنجاح",description:"تم إنشاء بيانات الأسرة"})},onError:a=>{c({title:"خطأ في الإنشاء",description:a.message,variant:"destructive"})}});F({mutationFn:async()=>{const a=s==null?void 0:s.id;if(!a)throw new Error("Family ID is required");return await W("PUT",`/api/family/${a}`,{wifeName:null,wifeID:null,wifeBirthDate:null,wifeJob:null,wifePregnant:!1})},onSuccess:()=>{G.invalidateQueries({queryKey:["/api/family"]}),c({title:"تم الحذف بنجاح",description:"تم حذف بيانات الزوجة"})},onError:a=>{c({title:"خطأ في الحذف",description:a.message,variant:"destructive"})}});const L=a=>{const n={...a,secondaryPhone:a.secondaryPhone||"",spouseName:a.spouseName||null,spouseID:a.spouseID||"",spouseBirthDate:a.spouseBirthDate||null,spouseJob:a.spouseJob||"",displacedLocation:a.displacedLocation||null,warDamageDescription:a.warDamageDescription||null,branch:a.branch||null,landmarkNear:a.landmarkNear||"",socialStatus:a.socialStatus||null,chronicIllnessType:a.chronicIllnessType||"",spouseChronicIllnessType:a.spouseChronicIllnessType||"",disabilityType:a.disabilityType||"",spouseDisabilityType:a.spouseDisabilityType||"",warInjuryType:a.warInjuryType||"",spouseWarInjuryType:a.spouseWarInjuryType||""},h={...n,husbandName:n.husbandName,husbandID:n.husbandID,husbandBirthDate:n.husbandBirthDate,husbandJob:n.husbandJob,wifeName:n.spouseName||null,wifeID:n.spouseID||null,wifeBirthDate:n.spouseBirthDate||null,wifeJob:n.spouseJob||null,wifePregnant:n.spousePregnant||!1,wifeHasChronicIllness:n.spouseHasChronicIllness||!1,wifeChronicIllnessType:n.spouseChronicIllnessType||null,wifeHasDisability:n.spouseHasDisability||!1,wifeDisabilityType:n.spouseDisabilityType||null,wifeHasWarInjury:n.spouseHasWarInjury||!1,wifeWarInjuryType:n.spouseWarInjuryType||null,hasWarInjury:n.hasWarInjury||!1,warInjuryType:n.warInjuryType||null,spouseName:void 0,spouseID:void 0,spouseBirthDate:void 0,spouseJob:void 0,spousePregnant:void 0,spouseHasChronicIllness:void 0,spouseChronicIllnessType:void 0,spouseHasDisability:void 0,spouseDisabilityType:void 0,spouseHasWarInjury:void 0,spouseWarInjuryType:void 0};s?h.headGender&&s.headGender!==h.headGender?W("PUT","/api/user/profile",{gender:h.headGender}).then(()=>{y.mutate(h)}).catch(g=>{console.error("Error updating user gender:",g),c({title:"خطأ",description:"فشل تحديث جنس رب/ربة الأسرة",variant:"destructive"}),y.mutate(h)}):y.mutate(h):_.mutate(h)},B=r.handleSubmit(L,a=>{const n=["husbandName","husbandID","husbandBirthDate","husbandJob","primaryPhone","originalResidence","currentHousing","totalMembers","numMales","numFemales"],h=Object.keys(a).filter(g=>n.includes(g));if(h.length>0){const g={husbandName:"اسم رب/ربة الأسرة",husbandID:"رقم هوية رب/ربة الأسرة",husbandJob:"مهنة رب/ربة الأسرة",husbandBirthDate:"تاريخ ميلاد رب/ربة الأسرة",primaryPhone:"الهاتف الأساسي",originalResidence:"السكن الأصلي",currentHousing:"السكن الحالي",totalMembers:"إجمالي الأفراد",numMales:"عدد الذكور",numFemales:"عدد الإناث"},U=h.map(k=>g[k]||k);c({title:"خطأ في التحقق",description:`يرجى مراجعة الحقول المطلوبة: ${U.join(", ")}`,variant:"destructive"})}}),R=a=>{if(!a)return"";try{const n=new Date(a);return q(n,"dd/MM/yyyy",{locale:te})}catch{return a}},$=a=>{if(!a)return"";try{const n=new Date(a);return q(n,"yyyy-MM-dd")}catch{return a}};return s!=null&&s.members.filter(a=>Y(a.birthDate)),C?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(M,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"جاري تحميل البيانات..."})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(M,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"بيانات الأسرة"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"إدارة وتحديث بيانات الأسرة الشخصية"})]}),e.jsx(Z,{href:"/dashboard/members",children:e.jsxs(I,{variant:"outline",className:"mb-4 w-full sm:w-auto",children:[e.jsx(ee,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"عرض أفراد الأسرة"})]})}),e.jsx("form",{onSubmit:B,className:"space-y-6 sm:space-y-8",children:e.jsxs(m,{children:[e.jsxs(x,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx(b,{className:"text-lg sm:text-xl",children:"بيانات رب الأسرة"}),!i&&e.jsx(I,{type:"button",variant:"outline",onClick:()=>D(!0),className:"w-full sm:w-auto text-sm sm:text-base",children:"تعديل"})]}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"husbandName",children:"الاسم الرباعي *"}),e.jsx(t,{id:"husbandName",disabled:!i,className:"text-right",...r.register("husbandName")}),r.formState.errors.husbandName&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.husbandName.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"husbandID",children:"رقم الهوية *"}),e.jsx(t,{id:"husbandID",disabled:!0,className:"text-right",...r.register("husbandID")}),r.formState.errors.husbandID&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.husbandID.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"husbandBirthDate",children:"تاريخ الميلاد"}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(t,{id:"husbandBirthDate",type:"date",disabled:!i,...r.register("husbandBirthDate")}),r.watch("husbandBirthDate")&&e.jsx(N,{variant:"outline",children:J(r.watch("husbandBirthDate"))})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"husbandJob",children:"المهنة *"}),e.jsx(t,{id:"husbandJob",disabled:!i,className:"text-right",...r.register("husbandJob")})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"headGender",children:"الجنس"}),e.jsxs(w,{value:r.watch("headGender")||(s==null?void 0:s.userGender)||"male",onValueChange:a=>r.setValue("headGender",a),disabled:!i,dir:"rtl",children:[e.jsx(H,{className:"text-right",children:e.jsx(T,{placeholder:"اختر الجنس",className:"text-right"})}),e.jsxs(A,{dir:"rtl",children:[e.jsx(o,{value:"male",className:"text-right",children:"ذكر"}),e.jsx(o,{value:"female",className:"text-right",children:"أنثى"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"primaryPhone",children:"رقم الجوال الأساسي *"}),e.jsx(t,{id:"primaryPhone",disabled:!i,className:"text-right",...r.register("primaryPhone")})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"secondaryPhone",children:"رقم الجوال البديل"}),e.jsx(t,{id:"secondaryPhone",disabled:!i,className:"text-right",...r.register("secondaryPhone")}),r.formState.errors.secondaryPhone&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.secondaryPhone.message})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"hasChronicIllness",disabled:!i,checked:r.watch("hasChronicIllness"),onCheckedChange:a=>r.setValue("hasChronicIllness",a)}),e.jsx(l,{htmlFor:"hasChronicIllness",className:"cursor-pointer",children:"يعاني من مرض مزمن"})]})}),e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"hasDisability",disabled:!i,checked:r.watch("hasDisability"),onCheckedChange:a=>r.setValue("hasDisability",a)}),e.jsx(l,{htmlFor:"hasDisability",className:"cursor-pointer",children:"يعاني من إعاقة"})]})}),e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"hasWarInjury",disabled:!i,checked:r.watch("hasWarInjury"),onCheckedChange:a=>r.setValue("hasWarInjury",a)}),e.jsx(l,{htmlFor:"hasWarInjury",className:"cursor-pointer",children:"يعاني من إصابة حرب"})]})})]})}),r.watch("hasChronicIllness")&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(l,{htmlFor:"chronicIllnessType",children:"نوع المرض المزمن"}),e.jsx(t,{id:"chronicIllnessType",placeholder:"اذكر نوع المرض المزمن",disabled:!i,...r.register("chronicIllnessType")})]}),r.watch("hasDisability")&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(l,{htmlFor:"disabilityType",children:"نوع الإعاقة"}),e.jsx(t,{id:"disabilityType",placeholder:"اذكر نوع الإعاقة",disabled:!i,...r.register("disabilityType")})]}),r.watch("hasWarInjury")&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(l,{htmlFor:"warInjuryType",children:"نوع إصابة الحرب"}),e.jsx(t,{id:"warInjuryType",placeholder:"اذكر نوع إصابة الحرب",disabled:!i,...r.register("warInjuryType")})]}),(r.watch("headGender")||(s==null?void 0:s.headGender)||"male")==="female"&&e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"spousePregnant",disabled:!i,checked:r.watch("spousePregnant"),onCheckedChange:a=>r.setValue("spousePregnant",a)}),e.jsx(l,{htmlFor:"spousePregnant",children:"حالة الحمل (ربة الأسرة)"})]})]})})]})}),i&&e.jsxs(m,{children:[e.jsx(x,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsx(b,{className:"text-lg sm:text-xl",children:(r.watch("headGender")||(s==null?void 0:s.headGender)||"male")==="female"?"بيانات الزوج":"بيانات الزوجة"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"spouseName",children:r.watch("headGender")==="female"?"اسم الزوج *":"اسم الزوجة"}),e.jsx(t,{id:"spouseName",disabled:!i,className:"text-right",...r.register("spouseName")}),r.formState.errors.spouseName&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.spouseName.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"spouseID",children:r.watch("headGender")==="female"?"رقم هوية الزوج *":"رقم هوية الزوجة"}),e.jsx(t,{id:"spouseID",disabled:!i,className:"text-right",...r.register("spouseID")}),r.formState.errors.spouseID&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.spouseID.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"spouseBirthDate",children:r.watch("headGender")==="female"?"تاريخ ميلاد الزوج":"تاريخ ميلاد الزوجة"}),e.jsx(t,{id:"spouseBirthDate",type:"date",disabled:!i,className:"text-right",...r.register("spouseBirthDate")})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"spouseJob",children:r.watch("headGender")==="female"?"مهنة الزوج":"مهنة الزوجة"}),e.jsx(t,{id:"spouseJob",disabled:!i,className:"text-right",...r.register("spouseJob")})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"spouseHasChronicIllness",disabled:!i,checked:r.watch("spouseHasChronicIllness"),onCheckedChange:a=>r.setValue("spouseHasChronicIllness",a)}),e.jsx(l,{htmlFor:"spouseHasChronicIllness",className:"cursor-pointer",children:r.watch("headGender")==="female"?"يعاني من مرض مزمن":"تعاني من مرض مزمن"})]})}),e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"spouseHasDisability",disabled:!i,checked:r.watch("spouseHasDisability"),onCheckedChange:a=>r.setValue("spouseHasDisability",a)}),e.jsx(l,{htmlFor:"spouseHasDisability",className:"cursor-pointer",children:r.watch("headGender")==="female"?"يعاني من إعاقة":"تعاني من إعاقة"})]})}),e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"spouseHasWarInjury",disabled:!i,checked:r.watch("spouseHasWarInjury"),onCheckedChange:a=>r.setValue("spouseHasWarInjury",a)}),e.jsx(l,{htmlFor:"spouseHasWarInjury",className:"cursor-pointer",children:r.watch("headGender")==="female"?"يعاني من إصابة حرب":"تعاني من إصابة حرب"})]})}),(r.watch("headGender")||(s==null?void 0:s.headGender)||"male")==="male"&&e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"spousePregnant",disabled:!i,checked:r.watch("spousePregnant"),onCheckedChange:a=>r.setValue("spousePregnant",a)}),e.jsx(l,{htmlFor:"spousePregnant",className:"cursor-pointer",children:"حالة الحمل (الزوجة)"})]})})]})}),r.watch("spouseHasChronicIllness")&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(l,{htmlFor:"spouseChronicIllnessType",children:r.watch("headGender")==="female"?"نوع مرض الزوج المزمن":"نوع مرض الزوجة المزمن"}),e.jsx(t,{id:"spouseChronicIllnessType",placeholder:"اذكر نوع المرض المزمن",disabled:!i,...r.register("spouseChronicIllnessType")})]}),r.watch("spouseHasDisability")&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(l,{htmlFor:"spouseDisabilityType",children:r.watch("headGender")==="female"?"نوع إعاقة الزوج":"نوع إعاقة الزوجة"}),e.jsx(t,{id:"spouseDisabilityType",placeholder:"اذكر نوع الإعاقة",disabled:!i,...r.register("spouseDisabilityType")})]}),r.watch("spouseHasWarInjury")&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(l,{htmlFor:"spouseWarInjuryType",children:r.watch("headGender")==="female"?"نوع إصابة الحرب للزوج":"نوع إصابة الحرب للزوجة"}),e.jsx(t,{id:"spouseWarInjuryType",placeholder:"اذكر نوع إصابة الحرب",disabled:!i,...r.register("spouseWarInjuryType")})]})]})})]}),!i&&((s==null?void 0:s.headGender)==="female"?s==null?void 0:s.spouseAsHusbandName:s==null?void 0:s.spouseAsWifeName)&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:s.headGender==="female"?"بيانات الزوج":"بيانات الزوجة"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"cursor-not-allowed",children:[e.jsx("h4",{className:"font-semibold text-lg text-muted-foreground",children:s.headGender==="female"?s.spouseAsHusbandName:s.spouseAsWifeName}),(s.headGender==="female"?s.spouseAsHusbandID:s.spouseAsWifeID)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["رقم الهوية: ",s.headGender==="female"?s.spouseAsHusbandID:s.spouseAsWifeID]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm opacity-70",children:[(s.headGender==="female"?s.spouseAsHusbandBirthDate:s.spouseAsWifeBirthDate)&&e.jsxs("div",{className:"cursor-not-allowed",children:[e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?"تاريخ ميلاد الزوج: ":"تاريخ ميلاد الزوجة: "}),e.jsx("span",{className:"text-muted-foreground",children:R(s.headGender==="female"?s.spouseAsHusbandBirthDate:s.spouseAsWifeBirthDate)}),e.jsx(N,{variant:"outline",className:"ml-2",children:J(s.headGender==="female"?s.spouseAsHusbandBirthDate:s.spouseAsWifeBirthDate)})]}),(s.headGender==="female"?s.spouseAsHusbandJob:s.spouseAsWifeJob)&&e.jsxs("div",{className:"cursor-not-allowed",children:[e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?"مهنة الزوج: ":"مهنة الزوجة: "}),e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?s.spouseAsHusbandJob:s.spouseAsWifeJob})]}),(s.headGender==="female"?s.spouseAsHusbandHasChronicIllness:s.spouseAsWifeHasChronicIllness)&&(s.headGender==="female"?s.spouseAsHusbandChronicIllnessType:s.spouseAsWifeChronicIllnessType)&&e.jsxs("div",{className:"cursor-not-allowed",children:[e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?"مرض الزوج المزمن: ":"مرض الزوجة المزمن: "}),e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?s.spouseAsHusbandChronicIllnessType:s.spouseAsWifeChronicIllnessType})]}),(s.headGender==="female"?s.spouseAsHusbandHasDisability:s.spouseAsWifeHasDisability)&&(s.headGender==="female"?s.spouseAsHusbandDisabilityType:s.spouseAsWifeDisabilityType)&&e.jsxs("div",{className:"cursor-not-allowed",children:[e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?"نوع إعاقة الزوج: ":"نوع إعاقة الزوجة: "}),e.jsx("span",{className:"text-muted-foreground",children:s.headGender==="female"?s.spouseAsHusbandDisabilityType:s.spouseAsWifeDisabilityType})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-2 opacity-70",children:[s.headGender==="male"&&s.spouseAsWifePregnant&&e.jsx(N,{variant:"secondary",className:"cursor-not-allowed",children:"حامل"}),(s.headGender==="female"?s.spouseAsHusbandHasChronicIllness:s.spouseAsWifeHasChronicIllness)&&e.jsx(N,{variant:"destructive",className:"cursor-not-allowed",children:s.headGender==="female"?"الزوج يعاني من مرض مزمن":"الزوجة تعاني من مرض مزمن"}),(s.headGender==="female"?s.spouseAsHusbandHasDisability:s.spouseAsWifeHasDisability)&&e.jsx(N,{variant:"destructive",className:"cursor-not-allowed",children:s.headGender==="female"?"الزوج يعاني من إعاقة":"الزوجة تعاني من إعاقة"})]})]},s.id)})})]}),!i&&!((s==null?void 0:s.headGender)==="female"?s!=null&&s.spouseAsHusbandName:s!=null&&s.spouseAsWifeName)&&e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:(s==null?void 0:s.headGender)==="female"?"بيانات الزوج":"بيانات الزوجة"})}),e.jsx(j,{children:e.jsx("div",{className:"text-center text-muted-foreground py-8",children:(s==null?void 0:s.headGender)==="female"?"لا يوجد زوج مسجل":"لا توجد زوجة مسجلة"})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6 sm:space-y-8",children:[e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:"عدد أفراد الأسرة"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"totalMembers",children:"إجمالي الأفراد *"}),e.jsx(t,{id:"totalMembers",type:"number",min:1,disabled:!i,className:"text-right",...r.register("totalMembers")}),r.formState.errors.totalMembers&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.totalMembers.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"numMales",children:"عدد الذكور *"}),e.jsx(t,{id:"numMales",type:"number",min:0,disabled:!i,className:"text-right",...r.register("numMales")}),r.formState.errors.numMales&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.numMales.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"numFemales",children:"عدد الإناث *"}),e.jsx(t,{id:"numFemales",type:"number",min:0,disabled:!i,className:"text-right",...r.register("numFemales")}),r.formState.errors.numFemales&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.numFemales.message})]})]})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:"بيانات السكن"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"originalResidence",children:"السكن الأصلي *"}),e.jsx(t,{id:"originalResidence",disabled:!i,className:"text-right",...r.register("originalResidence")}),r.formState.errors.originalResidence&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.originalResidence.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentHousing",children:"السكن الحالي *"}),e.jsx(t,{id:"currentHousing",disabled:!i,className:"text-right",...r.register("currentHousing")}),r.formState.errors.currentHousing&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:r.formState.errors.currentHousing.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"landmarkNear",children:"أقرب معلم"}),e.jsx(t,{id:"landmarkNear",disabled:!i,className:"text-right",...r.register("landmarkNear")})]})]})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:"المعلومات التنظيمية"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:e.jsxs("div",{children:[e.jsx(l,{children:"الفرع"}),i?e.jsx(e.Fragment,{children:e.jsxs(w,{disabled:!i,value:["abushalbia","alnaqra","abuawda","abunasr","abumatar"].includes(S)?S:"",onValueChange:a=>{r.setValue("branch",a)},dir:"rtl",children:[e.jsx(H,{className:"text-right",children:e.jsx(T,{placeholder:"اختر الفرع",className:"text-right"})}),e.jsxs(A,{dir:"rtl",children:[e.jsx(o,{value:"abushalbia",className:"text-right",children:"ابو شلبية (شلف - علاينة - عزايزة)"}),e.jsx(o,{value:"alnaqra",className:"text-right",children:"النقرة (الدوار)"}),e.jsx(o,{value:"abuawda",className:"text-right",children:"ابو عودة"}),e.jsx(o,{value:"abunasr",className:"text-right",children:"ابو نصر"}),e.jsx(o,{value:"abumatar",className:"text-right",children:"ابو مطر"})]})]})}):e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-not-allowed opacity-70",children:e.jsx("span",{className:"text-muted-foreground",children:!["abushalbia","alnaqra","abuawda","abunasr","abumatar"].includes((s==null?void 0:s.branch)||"")?(s==null?void 0:s.branch)||"غير محدد":se((s==null?void 0:s.branch)||"")})}),!i&&(s==null?void 0:s.branch)&&!["abushalbia","alnaqra","abuawda","abunasr","abumatar"].includes(s.branch)&&e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["القيمة المخصصة: ",s.branch]})]})]})})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:"المعلومات الشخصية والاجتماعية"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:e.jsxs("div",{children:[e.jsx(l,{children:"الحالة الاجتماعية"}),i?e.jsx(e.Fragment,{children:e.jsxs(w,{disabled:!i,value:V||"",onValueChange:a=>{r.setValue("socialStatus",a)},dir:"rtl",children:[e.jsx(H,{className:"text-right",children:e.jsx(T,{placeholder:"اختر الحالة",className:"text-right"})}),e.jsxs(A,{dir:"rtl",children:[e.jsx(o,{value:"married",className:"text-right",children:"متزوج"}),e.jsx(o,{value:"polygamous",className:"text-right",children:"متعدد زوجات"}),e.jsx(o,{value:"widowed",className:"text-right",children:"ارملة"}),e.jsx(o,{value:"vulnerable_family",className:"text-right",children:"اسر هشة (ايتام)"}),e.jsx(o,{value:"abandoned",className:"text-right",children:"متروكة"}),e.jsx(o,{value:"divorced",className:"text-right",children:"مطلقة"}),e.jsx(o,{value:"single",className:"text-right",children:"عانس"})]})]})}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-not-allowed opacity-70",children:e.jsx("span",{className:"text-muted-foreground",children:["married","polygamous","widowed","vulnerable_family","abandoned","divorced","single"].includes((s==null?void 0:s.socialStatus)||"")?ae((s==null?void 0:s.socialStatus)||""):(s==null?void 0:s.socialStatus)||"غير محدد"})})})]})})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(b,{className:"text-lg sm:text-xl",children:"المعلومات الاجتماعية والمعيشية"})}),e.jsx(j,{className:"space-y-4 sm:space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"isDisplaced",disabled:!i,checked:r.watch("isDisplaced"),onCheckedChange:a=>r.setValue("isDisplaced",a)}),e.jsx(l,{htmlFor:"isDisplaced",className:"cursor-pointer",children:"أسرة نازحة"})]})}),e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"isAbroad",disabled:!i,checked:r.watch("isAbroad"),onCheckedChange:a=>r.setValue("isAbroad",a)}),e.jsx(l,{htmlFor:"isAbroad",className:"cursor-pointer",children:"مغترب بالخارج"})]})}),e.jsx("div",{className:"rounded-md border border-input p-3",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(u,{id:"warDamage2023",disabled:!i,checked:r.watch("warDamage2023"),onCheckedChange:a=>r.setValue("warDamage2023",a)}),e.jsx(l,{htmlFor:"warDamage2023",className:"cursor-pointer",children:"أضرار 2023"})]})})]}),r.watch("isDisplaced")&&e.jsxs("div",{children:[e.jsx(l,{htmlFor:"displacedLocation",children:"موقع النزوح"}),e.jsx(t,{id:"displacedLocation",disabled:!i,className:"text-right",...r.register("displacedLocation")})]}),(!i||r.watch("warDamage2023"))&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(l,{children:"نوع الأضرار"}),i?e.jsx(e.Fragment,{children:e.jsxs(w,{disabled:!i,value:E||"",onValueChange:a=>{r.setValue("warDamageDescription",a)},dir:"rtl",children:[e.jsx(H,{className:"text-right",children:e.jsx(T,{placeholder:"اختر نوع الأضرار",className:"text-right"})}),e.jsxs(A,{dir:"rtl",children:[e.jsx(o,{value:"total_destruction_uninhabitable",className:"text-right",children:"هدم كلي غير قابل للسكن"}),e.jsx(o,{value:"partial_destruction_habitable",className:"text-right",children:"هدم جزئي قابل للسكن"}),e.jsx(o,{value:"minor_damage",className:"text-right",children:"اضرار بسيطة"})]})]})}):e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-not-allowed opacity-70",children:e.jsx("span",{className:"text-muted-foreground",children:["total_destruction_uninhabitable","partial_destruction_habitable","minor_damage"].includes((s==null?void 0:s.warDamageDescription)||"")?re((s==null?void 0:s.warDamageDescription)||""):(s==null?void 0:s.warDamageDescription)||"غير محدد"})})})]})})]})})]}),i&&e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4",children:[e.jsx(I,{type:"button",variant:"outline",onClick:()=>D(!1),className:"w-full sm:w-auto order-2 sm:order-1 text-sm sm:text-base",children:"إلغاء"}),e.jsx(I,{type:"submit",disabled:C||y.isPending||_.isPending,className:"w-full sm:w-auto order-1 sm:order-2 text-sm sm:text-base",children:C?"جاري التحميل...":y.isPending||_.isPending?"جاري الحفظ...":"حفظ"})]})]})]})]})}export{be as default};
