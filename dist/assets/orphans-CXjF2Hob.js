import{r as d,j as e,aj as $e,ap as We,ak as re,ai as Ge,ah as we,al as pe,am as Qe,an as Ve,ag as ge,a0 as Xe,t as Je,c as Ye,b as Ze,w as be,B as j,C as _,d as T,U as z,K as Ke,I as h,S as et,m as tt,n as st,p as rt,q as Q,e as at,f as lt,x as p,O as te}from"./index-BRVCUzIT.js";import{D as fe,a as Ne,b as je,c as ye}from"./dialog-D51Jx8ed.js";import{P as ve,D as se}from"./page-wrapper-D2Xzdxb4.js";import{A as nt,a as dt,b as it,c as ct,d as ot,e as mt,f as xt,g as ut}from"./alert-dialog-D8hb8FtP.js";import{E as ht}from"./exceljs.min-Cz8xvZTz.js";import{S as pt}from"./search-DbNGpwvW.js";import{P as ke,T as Ce}from"./trash-2-a2eIXDOS.js";import"./index-uwi08Yf3.js";import"./file-text-Bxr2bFQ2.js";import"./dropdown-menu-DdnnckdS.js";var V="Checkbox",[gt,Et]=$e(V),[bt,ae]=gt(V);function ft(l){const{__scopeCheckbox:x,checked:g,children:k,defaultChecked:N,disabled:n,form:C,name:o,onCheckedChange:f,required:D,value:v="on",internal_do_not_use_render:m}=l,[y,A]=Ge({prop:g,defaultProp:N??!1,onChange:f,caller:V}),[w,r]=d.useState(null),[i,b]=d.useState(null),u=d.useRef(!1),E=w?!!C||!!w.closest("form"):!0,R={checked:y,disabled:n,setChecked:A,control:w,setControl:r,name:o,form:C,value:v,hasConsumerStoppedPropagationRef:u,required:D,defaultChecked:F(N)?!1:N,isFormControl:E,bubbleInput:i,setBubbleInput:b};return e.jsx(bt,{scope:x,...R,children:Nt(m)?m(R):k})}var De="CheckboxTrigger",Ie=d.forwardRef(({__scopeCheckbox:l,onKeyDown:x,onClick:g,...k},N)=>{const{control:n,value:C,disabled:o,checked:f,required:D,setControl:v,setChecked:m,hasConsumerStoppedPropagationRef:y,isFormControl:A,bubbleInput:w}=ae(De,l),r=we(N,v),i=d.useRef(f);return d.useEffect(()=>{const b=n==null?void 0:n.form;if(b){const u=()=>m(i.current);return b.addEventListener("reset",u),()=>b.removeEventListener("reset",u)}},[n,m]),e.jsx(re.button,{type:"button",role:"checkbox","aria-checked":F(f)?"mixed":f,"aria-required":D,"data-state":_e(f),"data-disabled":o?"":void 0,disabled:o,value:C,...k,ref:r,onKeyDown:pe(x,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:pe(g,b=>{m(u=>F(u)?!0:!u),w&&A&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})})});Ie.displayName=De;var le=d.forwardRef((l,x)=>{const{__scopeCheckbox:g,name:k,checked:N,defaultChecked:n,required:C,disabled:o,value:f,onCheckedChange:D,form:v,...m}=l;return e.jsx(ft,{__scopeCheckbox:g,checked:N,defaultChecked:n,disabled:o,required:C,onCheckedChange:D,name:k,form:v,value:f,internal_do_not_use_render:({isFormControl:y})=>e.jsxs(e.Fragment,{children:[e.jsx(Ie,{...m,ref:x,__scopeCheckbox:g}),y&&e.jsx(Se,{__scopeCheckbox:g})]})})});le.displayName=V;var Fe="CheckboxIndicator",Ae=d.forwardRef((l,x)=>{const{__scopeCheckbox:g,forceMount:k,...N}=l,n=ae(Fe,g);return e.jsx(We,{present:k||F(n.checked)||n.checked===!0,children:e.jsx(re.span,{"data-state":_e(n.checked),"data-disabled":n.disabled?"":void 0,...N,ref:x,style:{pointerEvents:"none",...l.style}})})});Ae.displayName=Fe;var Ee="CheckboxBubbleInput",Se=d.forwardRef(({__scopeCheckbox:l,...x},g)=>{const{control:k,hasConsumerStoppedPropagationRef:N,checked:n,defaultChecked:C,required:o,disabled:f,name:D,value:v,form:m,bubbleInput:y,setBubbleInput:A}=ae(Ee,l),w=we(g,A),r=Qe(n),i=Ve(k);d.useEffect(()=>{const u=y;if(!u)return;const E=window.HTMLInputElement.prototype,U=Object.getOwnPropertyDescriptor(E,"checked").set,q=!N.current;if(r!==n&&U){const I=new Event("click",{bubbles:q});u.indeterminate=F(n),U.call(u,F(n)?!1:n),u.dispatchEvent(I)}},[y,r,n,N]);const b=d.useRef(F(n)?!1:n);return e.jsx(re.input,{type:"checkbox","aria-hidden":!0,defaultChecked:C??b.current,required:o,disabled:f,name:D,value:v,form:m,...x,tabIndex:-1,ref:w,style:{...x.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Se.displayName=Ee;function Nt(l){return typeof l=="function"}function F(l){return l==="indeterminate"}function _e(l){return F(l)?"indeterminate":l?"checked":"unchecked"}const Te=d.forwardRef(({className:l,...x},g)=>e.jsx(le,{ref:g,className:ge("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",l),...x,children:e.jsx(Ae,{className:ge("flex items-center justify-center text-current"),children:e.jsx(Xe,{className:"h-4 w-4"})})}));Te.displayName=le.displayName;function St(){var ie;const{toast:l}=Je(),[x,g]=d.useState(""),[k,N]=d.useState("all"),[n,C]=d.useState("all"),[o,f]=d.useState(1),[D,v]=d.useState(!1),[m,y]=d.useState(null),[A,w]=d.useState(!1),[r,i]=d.useState(null),[b,u]=d.useState(!1),E=10,{data:R,isLoading:U,refetch:q}=Ye({queryKey:["/api/admin/orphans"],queryFn:async()=>(await te.get("/api/admin/orphans")).data}),I=d.useMemo(()=>[{key:"orphanName",label:"اسم اليتيم",checked:!0},{key:"orphanBirthDate",label:"تاريخ الميلاد",checked:!0},{key:"orphanID",label:"رقم الهوية",checked:!0},{key:"guardianName",label:"اسم الوصي",checked:!0},{key:"guardianID",label:"رقم هوية الوصي",checked:!0},{key:"guardianBirthDate",label:"تاريخ ميلاد الوصي",checked:!0},{key:"fatherName",label:"اسم الاب",checked:!0},{key:"fatherID",label:"رقم الهوية",checked:!0},{key:"martyrdomDate",label:"تاريخ الاستشهاد",checked:!0},{key:"bankAccountNumber",label:"رقم حساب البنك",checked:!0},{key:"accountHolderName",label:"اسم صاحب الحساب",checked:!0},{key:"currentAddress",label:"العنوان الحالي",checked:!0},{key:"originalAddress",label:"العنوان الاصل",checked:!0},{key:"mobileNumber",label:"رقم الجوال",checked:!0},{key:"backupMobileNumber",label:"رقم جوال احتياطي",checked:!0},{key:"orphansUnder18Count",label:"عدد الأيتام تحت 18",checked:!0},{key:"familyHusbandName",label:"اسم رب الأسرة",checked:!0}],[]),[X,$]=d.useState({});d.useEffect(()=>{$(t=>{const a={};for(const c of I)a[c.key]=t[c.key]!==void 0?t[c.key]:c.checked;return a})},[I]);const Be=t=>{$(a=>({...a,[t]:!a[t]}))},Pe=()=>{$(Object.fromEntries(I.map(t=>[t.key,!0])))},Re=()=>{$(Object.fromEntries(I.map(t=>[t.key,!1])))},O=R||[],B=O.filter(t=>{var L,H;const a=t.orphanName.toLowerCase().includes(x.toLowerCase())||((L=t.orphanID)==null?void 0:L.toLowerCase().includes(x.toLowerCase()))||t.guardianName.toLowerCase().includes(x.toLowerCase())||(((H=t.family)==null?void 0:H.husbandName)||"").toLowerCase().includes(x.toLowerCase()),c=n==="all"||t.martyrdomType===n;return a&&c}),Oe=O.length,J=B.slice((o-1)*E,o*E),M=Math.ceil(B.length/E),{settings:S}=Ze();d.useEffect(()=>{S.siteTitle&&(document.title=S.siteTitle),S.language&&(document.documentElement.lang=S.language,document.body.dir=S.language==="ar"?"rtl":"ltr")},[S.siteTitle,S.language]);const Y=be({mutationFn:async t=>(await te.delete(`/api/admin/orphans/${t}`)).data,onSuccess:()=>{l({title:"تم الحذف بنجاح",description:"تم حذف بيانات اليتيم"}),v(!1),y(null),q()},onError:t=>{l({title:"خطأ في الحذف",description:t.message||"حدث خطأ أثناء حذف بيانات اليتيم",variant:"destructive"})}}),ne=t=>{y(t),v(!0)},Z=be({mutationFn:async({id:t,data:a})=>(await te.put(`/api/admin/orphans/${t}`,a)).data,onSuccess:t=>{queryClient.setQueryData(["/api/admin/orphans"],a=>a&&a.map(c=>c.id===t.id?t:c)),l({title:"تم التحديث بنجاح",description:"تم تحديث بيانات اليتيم"}),u(!1),i(null),q()},onError:t=>{l({title:"خطأ في التحديث",description:t.message||"حدث خطأ أثناء تحديث بيانات اليتيم",variant:"destructive"})}}),de=t=>{i(t),u(!0)},Me=()=>{m&&Y.mutate(m.id)},Le=async()=>{try{const t=new ht.Workbook,a=t.addWorksheet("الأيتام",{views:[{rightToLeft:!0}]}),c={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4CAF50"}},font:{color:{argb:"FFFFFFFF"},bold:!0,size:16},alignment:{horizontal:"center",vertical:"middle"}},L={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4CAF50"}},font:{color:{argb:"FFFFFFFF"},bold:!0,size:12},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},H={alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},P=I.filter(s=>X[s.key]),ce=Array(P.length).fill("");ce[0]="بيانات الأيتام (تصدير)";const K=a.addRow(ce);K.height=30;const He=a.getColumn(P.length).letter;a.mergeCells(`A1:${He}1`),K.getCell(1).style=c,K.getCell(1).alignment={horizontal:"center",vertical:"middle"};const oe=a.addRow(P.map(s=>s.label));oe.height=30,oe.eachCell(s=>{s.style=L,s.alignment={...L.alignment,wrapText:!0}}),B.forEach(s=>{const W=P.map(G=>{var he;switch(G.key){case"orphanName":return s.orphanName||"";case"orphanBirthDate":return s.orphanBirthDate||"";case"orphanID":return s.orphanID||"";case"guardianName":return s.guardianName||"";case"guardianID":return s.guardianID||"";case"guardianBirthDate":return s.guardianBirthDate||"";case"fatherName":return s.fatherName||"";case"fatherID":return s.fatherID||"";case"martyrdomDate":return s.martyrdomDate||"";case"bankAccountNumber":return s.bankAccountNumber||"";case"accountHolderName":return s.accountHolderName||"";case"currentAddress":return s.currentAddress||"";case"originalAddress":return s.originalAddress||"";case"mobileNumber":return s.mobileNumber||"";case"backupMobileNumber":return s.backupMobileNumber||"";case"orphansUnder18Count":return s.orphansUnder18Count||0;case"familyHusbandName":return((he=s.family)==null?void 0:he.husbandName)||"";default:return""}}),ue=a.addRow(W);ue.height=25,ue.eachCell(G=>{G.style=H,G.alignment={...H.alignment,wrapText:!0}})});const ze=s=>s.includes("Name")||s.includes("name")||s.includes("اسم")||s.includes("Address")||s.includes("address")||s.includes("address")||s.includes("accountHolderName")?30:s.includes("Date")||s.includes("date")||s.includes("ID")||s.includes("id")||s.includes("BirthDate")||s.includes("martyrdom")?20:s.includes("Phone")||s.includes("phone")||s.includes("Mobile")||s.includes("mobile")?18:15;P.forEach((s,W)=>{a.getColumn(W+1).width=ze(P[W].key)});const me=`orphans_export_${new Date().toISOString().split("T")[0]}.xlsx`,Ue=await t.xlsx.writeBuffer(),qe=new Blob([Ue],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),xe=window.URL.createObjectURL(qe),ee=document.createElement("a");ee.href=xe,ee.download=me,ee.click(),window.URL.revokeObjectURL(xe),l({title:"تم التصدير بنجاح",description:`تم حفظ ملف Excel باسم: ${me}`})}catch(t){console.error("Error exporting to Excel:",t),l({title:"خطأ في التصدير",description:"حدث خطأ أثناء تصدير البيانات إلى Excel",variant:"destructive"})}};return U?e.jsx(ve,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"جاري تحميل البيانات..."})})}):e.jsx(ve,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"إدارة اليتامى"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"عرض وتعديل بيانات جميع الأيتام في النظام"})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:e.jsxs(j,{onClick:()=>w(!0),variant:"outline",className:"flex items-center gap-2 justify-center",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"تصدير إلى Excel"}),e.jsx("span",{className:"sm:hidden",children:"تصدير"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6",children:[e.jsx(_,{children:e.jsx(T,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 rounded-lg",children:e.jsx(z,{className:"h-5 w-5 md:h-6 md:w-6 text-primary"})}),e.jsxs("div",{className:"mr-3 md:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي اليتامى"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:Oe})]})]})})}),e.jsx(_,{children:e.jsx(T,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 rounded-lg",children:e.jsx(z,{className:"h-5 w-5 md:h-6 md:w-6 text-yellow-600"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"اليتامى أقل من 18 سنة"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:O.filter(t=>Ke(t.orphanBirthDate)<18).length})]})]})})}),e.jsx(_,{children:e.jsx(T,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 md:p-3 bg-red-100 rounded-lg",children:e.jsx(z,{className:"h-5 w-5 md:h-6 md:w-6 text-red-600"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"شهداء حرب ٢٠٢٣"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:O.filter(t=>t.martyrdomType==="war_2023").length})]})]})})}),e.jsx(_,{children:e.jsx(T,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 md:p-3 bg-green-100 rounded-lg",children:e.jsx(z,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"شهداء أخرون"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:O.filter(t=>t.martyrdomType==="pre_2023_war"||t.martyrdomType==="natural_death").length})]})]})})})]}),e.jsx(_,{children:e.jsx(T,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(h,{placeholder:"بحث باسم اليتيم أو رقم الهوية أو اسم الوصي أو اسم رب الأسرة...",value:x,onChange:t=>g(t.target.value),className:"pr-10"})]}),e.jsxs(et,{value:n,onValueChange:C,children:[e.jsx(tt,{className:"w-full sm:w-[200px]",children:e.jsx(st,{placeholder:"نوع الوفاة"})}),e.jsxs(rt,{children:[e.jsx(Q,{value:"all",children:"كل أنواع الوفاة"}),e.jsx(Q,{value:"war_2023",children:"شهيد حرب ٢٠٢٣"}),e.jsx(Q,{value:"pre_2023_war",children:"شهيد حرب ما قبل ٢٠٢٣"}),e.jsx(Q,{value:"natural_death",children:"وفاة طبيعية"})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["تم العثور على ",B.length," ",B.length===1?"يتيم":"أيتام"]})]})})}),e.jsxs(_,{children:[e.jsx(at,{children:e.jsxs(lt,{className:"text-lg sm:text-xl",children:["قائمة الأيتام (",B.length," فرد)"]})}),e.jsx(T,{children:J.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block sm:hidden space-y-4",children:J.map(t=>{var a;return e.jsx(_,{className:"border border-gray-200",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base",children:t.orphanName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["رقم الهوية: ",t.orphanID||"غير محدد"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>de(t),className:"p-2",children:e.jsx(ke,{className:"h-3 w-3"})}),e.jsx(j,{variant:"destructive",size:"sm",onClick:()=>ne(t),className:"p-2",children:e.jsx(Ce,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الميلاد:"}),e.jsx("p",{className:"font-medium",children:t.orphanBirthDate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"رقم هوية الوصي:"}),e.jsx("p",{className:"font-medium",children:t.guardianID||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"اسم الأسرة:"}),e.jsx("p",{className:"font-medium",children:((a=t.family)==null?void 0:a.husbandName)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"اسم الأب:"}),e.jsx("p",{className:"font-medium",children:t.fatherName||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الاستشهاد:"}),e.jsx("p",{className:"font-medium",children:t.martyrdomDate||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"رقم الجوال:"}),e.jsx("p",{className:"font-medium",children:t.mobileNumber||"غير محدد"})]})]})]})})},t.id)})}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-background",children:[e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"اسم اليتيم"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"تاريخ الميلاد"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم الهوية"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"اسم الوصي"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم هوية الوصي"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"تاريخ ميلاد الوصي"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"اسم الاب"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم الهوية"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"تاريخ الاستشهاد"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم حساب البنك"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"اسم صاحب الحساب"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"العنوان الحالي"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"العنوان الاصل"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم الجوال"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم جوال احتياطي"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"عدد الأيتام تحت 18"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"الإجراءات"})]})}),e.jsx("tbody",{children:J.map(t=>e.jsxs("tr",{className:"hover:bg-muted",children:[e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.orphanName}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.orphanBirthDate}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.orphanID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.guardianName}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.guardianID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.guardianBirthDate}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.fatherName||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.fatherID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.martyrdomDate||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.bankAccountNumber||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.accountHolderName||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.currentAddress||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.originalAddress||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.mobileNumber||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.backupMobileNumber||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:t.orphansUnder18Count||0}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:e.jsxs("div",{className:"flex space-x-1 sm:space-x-2 space-x-reverse",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:()=>de(t),className:"p-1.5 sm:p-2",children:e.jsx(ke,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(j,{variant:"destructive",size:"sm",onClick:()=>ne(t),className:"p-1.5 sm:p-2",children:e.jsx(Ce,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},t.id))})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-6",children:[e.jsx(j,{variant:"outline",size:"sm",disabled:o===1,onClick:()=>f(o-1),className:"text-sm",children:"السابق"}),Array.from({length:Math.min(5,M)},(t,a)=>{let c;return M<=5||o<=3?c=a+1:o>=M-2?c=M-4+a:c=o-2+a,e.jsx(j,{variant:c===o?"default":"outline",size:"sm",onClick:()=>f(c),className:"text-sm min-w-[32px] h-8",children:c},c)}),e.jsx(j,{variant:"outline",size:"sm",disabled:o===M,onClick:()=>f(o+1),className:"text-sm",children:"التالي"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"لا توجد أيتام مسجلين"})]})})]}),e.jsx(nt,{open:D,onOpenChange:v,children:e.jsxs(dt,{className:"w-[95vw] max-w-md mx-auto sm:w-full",children:[e.jsxs(it,{className:"px-4 sm:px-6",children:[e.jsx(ct,{className:"text-lg sm:text-xl font-bold text-center",children:"تأكيد الحذف"}),e.jsxs(ot,{className:"text-right text-sm sm:text-base",children:['هل أنت متأكد من حذف اليتيم "',m==null?void 0:m.orphanName,'" من الأسرة "',(ie=m==null?void 0:m.family)==null?void 0:ie.husbandName,'"؟',e.jsx("br",{}),"لا يمكن التراجع عن هذا الإجراء."]})]}),e.jsxs(mt,{className:"flex flex-col sm:flex-row justify-center gap-2 px-4 sm:px-6 pb-4 sm:pb-6",children:[e.jsx(xt,{className:"w-full sm:w-auto",children:"إلغاء"}),e.jsx(ut,{onClick:Me,className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:Y.isPending,children:Y.isPending?"جاري الحذف...":"حذف"})]})]})}),e.jsx(fe,{open:A,onOpenChange:w,children:e.jsxs(Ne,{className:"max-w-4xl max-h-[90vh] w-[95vw] overflow-y-auto",children:[e.jsxs(je,{className:"px-4 sm:px-6",children:[e.jsxs(ye,{className:"flex items-center gap-2 text-lg sm:text-xl font-bold",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:"تصدير بيانات الأيتام إلى Excel"})]}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"حدد الأعمدة التي ترغب في تضمينها في التصدير"})]}),e.jsxs("div",{className:"px-4 sm:px-6 py-4",children:[e.jsxs("div",{className:"flex justify-end gap-2 mb-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:Pe,className:"text-sm",children:"تحديد الكل"}),e.jsx(j,{type:"button",variant:"outline",onClick:Re,className:"text-sm",children:"إلغاء التحديد"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-4",dir:"rtl",children:I.map(t=>e.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer transition-all select-none shadow-sm ${X[t.key]?"bg-green-50 border-green-500 text-green-800 font-bold ring-2 ring-green-200":"bg-white border-gray-200 text-gray-700 hover:border-green-300"}`,children:[e.jsx(Te,{checked:X[t.key],onCheckedChange:()=>Be(t.key),className:"data-[state=checked]:bg-green-600 data-[state=checked]:text-white"}),e.jsx("span",{className:"text-sm",children:t.label})]},t.key))}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(j,{onClick:Le,className:"bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"تصدير إلى Excel"]})})]})]})}),e.jsx(fe,{open:b,onOpenChange:u,children:e.jsxs(Ne,{className:"max-w-2xl max-h-[90vh] w-[95vw] overflow-y-auto",children:[e.jsx(je,{className:"px-4 sm:px-6",children:e.jsx(ye,{className:"text-lg sm:text-xl font-bold text-center",children:"تعديل بيانات اليتيم"})}),e.jsx("div",{className:"px-4 sm:px-6 py-4",children:r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"orphanName",className:"text-sm font-medium",children:"اسم اليتيم *"}),e.jsx(h,{id:"orphanName",value:r.orphanName||"",onChange:t=>i({...r,orphanName:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"orphanID",className:"text-sm font-medium",children:"رقم هوية اليتيم"}),e.jsx(h,{id:"orphanID",value:r.orphanID||"",onChange:t=>i({...r,orphanID:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"orphanBirthDate",className:"text-sm font-medium",children:"تاريخ ميلاد اليتيم *"}),e.jsx(h,{id:"orphanBirthDate",type:"date",value:r.orphanBirthDate||"",onChange:t=>i({...r,orphanBirthDate:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"guardianName",className:"text-sm font-medium",children:"اسم الوصي *"}),e.jsx(h,{id:"guardianName",value:r.guardianName||"",onChange:t=>i({...r,guardianName:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"guardianID",className:"text-sm font-medium",children:"رقم هوية الوصي *"}),e.jsx(h,{id:"guardianID",value:r.guardianID||"",onChange:t=>i({...r,guardianID:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"guardianBirthDate",className:"text-sm font-medium",children:"تاريخ ميلاد الوصي *"}),e.jsx(h,{id:"guardianBirthDate",type:"date",value:r.guardianBirthDate||"",onChange:t=>i({...r,guardianBirthDate:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"fatherName",className:"text-sm font-medium",children:"اسم الأب"}),e.jsx(h,{id:"fatherName",value:r.fatherName||"",onChange:t=>i({...r,fatherName:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"fatherID",className:"text-sm font-medium",children:"رقم هوية الأب"}),e.jsx(h,{id:"fatherID",value:r.fatherID||"",onChange:t=>i({...r,fatherID:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"martyrdomDate",className:"text-sm font-medium",children:"تاريخ الاستشهاد"}),e.jsx(h,{id:"martyrdomDate",type:"date",value:r.martyrdomDate||"",onChange:t=>i({...r,martyrdomDate:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"martyrdomType",className:"text-sm font-medium",children:"نوع الوفاة"}),e.jsxs("select",{id:"martyrdomType",value:r.martyrdomType||"",onChange:t=>i({...r,martyrdomType:t.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2 mt-1",children:[e.jsx("option",{value:"",children:"اختر نوع الوفاة"}),e.jsx("option",{value:"war_2023",children:"شهيد حرب ٢٠٢٣"}),e.jsx("option",{value:"pre_2023_war",children:"شهيد حرب ما قبل ذلك"}),e.jsx("option",{value:"natural_death",children:"وفاة طبيعية"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"bankAccountNumber",className:"text-sm font-medium",children:"رقم حساب البنك"}),e.jsx(h,{id:"bankAccountNumber",value:r.bankAccountNumber||"",onChange:t=>i({...r,bankAccountNumber:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"accountHolderName",className:"text-sm font-medium",children:"اسم صاحب الحساب"}),e.jsx(h,{id:"accountHolderName",value:r.accountHolderName||"",onChange:t=>i({...r,accountHolderName:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"currentAddress",className:"text-sm font-medium",children:"العنوان الحالي"}),e.jsx(h,{id:"currentAddress",value:r.currentAddress||"",onChange:t=>i({...r,currentAddress:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"originalAddress",className:"text-sm font-medium",children:"العنوان الأصلي"}),e.jsx(h,{id:"originalAddress",value:r.originalAddress||"",onChange:t=>i({...r,originalAddress:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"mobileNumber",className:"text-sm font-medium",children:"رقم الجوال"}),e.jsx(h,{id:"mobileNumber",value:r.mobileNumber||"",onChange:t=>i({...r,mobileNumber:t.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"backupMobileNumber",className:"text-sm font-medium",children:"رقم الجوال الاحتياطي"}),e.jsx(h,{id:"backupMobileNumber",value:r.backupMobileNumber||"",onChange:t=>i({...r,backupMobileNumber:t.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>u(!1),children:"إلغاء"}),e.jsx(j,{type:"button",onClick:()=>Z.mutate({id:r.id,data:r}),disabled:Z.isPending,children:Z.isPending?"جاري التحديث...":"تحديث"})]})]})})]})})]})})}export{St as default};
