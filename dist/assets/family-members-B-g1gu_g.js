import{v as ee,j as e,x as m,I as b,S as Q,m as L,n as _,p as G,q as i,B as c,A as se,E as te,G as n,H as w,F as ae,t as pe,r as N,c as ge,w as A,K as E,b as je,C as y,d as v,U as D,e as fe,f as be,y as K,M as R,N as J,D as P,O as V}from"./index-ZYzdAsGm.js";import{D as Ne,a as ye,b as ve,c as De}from"./dialog-S7UO55CL.js";import{a as d}from"./dropdown-menu-C5FzIU9D.js";import{S as O}from"./switch-DBFXyOxO.js";import{A as we,a as Ie,b as Ce,c as Te,d as Se,e as ke,f as Fe,g as Me}from"./alert-dialog-BGXVV_jb.js";import{H as X}from"./header-qJrll5lw.js";import{P as Ae}from"./plus-hSYWIs9K.js";import{P as Y,T as Z}from"./trash-2-BvJN9095.js";import"./index-CvI2JamZ.js";const Ee=te({fullName:n().min(1,"الاسم مطلوب"),memberID:n().regex(/^\d{9}$/,"رقم الهوية يجب أن يكون 9 أرقام").min(1,"رقم الهوية مطلوب"),birthDate:n().min(1,"تاريخ الميلاد مطلوب"),gender:ae(["male","female"],{required_error:"الجنس مطلوب"}),relationship:n().min(1,"القرابة مطلوبة"),isDisabled:w().default(!1),disabilityType:n().optional(),hasChronicIllness:w().default(!1),chronicIllnessType:n().optional(),hasWarInjury:w().default(!1),warInjuryType:n().optional()});function Pe({initialData:x,onSubmit:C,onCancel:u,isLoading:o=!1,isEdit:p=!1}){const t=ee({resolver:se(Ee),defaultValues:{fullName:"",birthDate:"",gender:"male",relationship:"",isDisabled:!1,disabilityType:"",hasChronicIllness:!1,chronicIllnessType:"",hasWarInjury:!1,warInjuryType:"",...x}}),I=r=>{C(r)};return e.jsxs("form",{onSubmit:t.handleSubmit(I),className:"space-y-3 sm:space-y-4 lg:space-y-5",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"fullName",className:"text-sm sm:text-base font-medium",children:"الاسم الكامل *"}),e.jsx(b,{id:"fullName",placeholder:"محمد فتح محمود أبو طير",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("fullName")}),t.formState.errors.fullName&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.fullName.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"memberID",className:"text-sm sm:text-base font-medium",children:"رقم الهوية *"}),e.jsx(b,{id:"memberID",placeholder:"رقم الهوية (9 أرقام)",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("memberID")}),t.formState.errors.memberID&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.memberID.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"birthDate",className:"text-sm sm:text-base font-medium",children:"تاريخ الميلاد *"}),e.jsx(b,{id:"birthDate",type:"date",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("birthDate")}),t.formState.errors.birthDate&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.birthDate.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"gender",className:"text-sm sm:text-base font-medium",children:"الجنس *"}),e.jsxs(Q,{value:t.watch("gender"),onValueChange:r=>t.setValue("gender",r),children:[e.jsx(L,{className:"h-10 sm:h-11 text-sm sm:text-base mt-1",children:e.jsx(_,{})}),e.jsxs(G,{children:[e.jsx(i,{value:"male",className:"text-sm sm:text-base",children:"ذكر"}),e.jsx(i,{value:"female",className:"text-sm sm:text-base",children:"أنثى"})]})]}),t.formState.errors.gender&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.gender.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"relationship",className:"text-sm sm:text-base font-medium",children:"القرابة *"}),e.jsxs(Q,{value:t.watch("relationship"),onValueChange:r=>t.setValue("relationship",r),children:[e.jsx(L,{className:"h-10 sm:h-11 text-sm sm:text-base mt-1",children:e.jsx(_,{placeholder:"اختر القرابة"})}),e.jsxs(G,{children:[e.jsx(i,{value:"son",className:"text-sm sm:text-base",children:"ابن"}),e.jsx(i,{value:"daughter",className:"text-sm sm:text-base",children:"ابنة"}),e.jsx(i,{value:"mother",className:"text-sm sm:text-base",children:"أم"}),e.jsx(i,{value:"father",className:"text-sm sm:text-base",children:"أب"}),e.jsx(i,{value:"brother",className:"text-sm sm:text-base",children:"أخ"}),e.jsx(i,{value:"sister",className:"text-sm sm:text-base",children:"أخت"}),e.jsx(i,{value:"grandfather",className:"text-sm sm:text-base",children:"جد"}),e.jsx(i,{value:"grandmother",className:"text-sm sm:text-base",children:"جدة"}),e.jsx(i,{value:"uncle",className:"text-sm sm:text-base",children:"عم"}),e.jsx(i,{value:"aunt",className:"text-sm sm:text-base",children:"عمة"}),e.jsx(i,{value:"other",className:"text-sm sm:text-base",children:"أخرى"})]})]}),t.formState.errors.relationship&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.relationship.message})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse py-1",children:[e.jsx(O,{id:"isDisabled",checked:t.watch("isDisabled"),onCheckedChange:r=>t.setValue("isDisabled",r)}),e.jsx(m,{htmlFor:"isDisabled",className:"text-sm sm:text-base font-medium",children:"يعاني من إعاقة"})]}),t.watch("isDisabled")&&e.jsxs("div",{children:[e.jsx(m,{htmlFor:"disabilityType",className:"text-sm sm:text-base font-medium",children:"نوع الإعاقة"}),e.jsx(b,{id:"disabilityType",placeholder:"اذكر نوع الإعاقة",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("disabilityType")})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse py-1",children:[e.jsx(O,{id:"hasChronicIllness",checked:t.watch("hasChronicIllness"),onCheckedChange:r=>t.setValue("hasChronicIllness",r)}),e.jsx(m,{htmlFor:"hasChronicIllness",className:"text-sm sm:text-base font-medium",children:"يعاني من مرض مزمن"})]}),t.watch("hasChronicIllness")&&e.jsxs("div",{children:[e.jsx(m,{htmlFor:"chronicIllnessType",className:"text-sm sm:text-base font-medium",children:"نوع المرض المزمن"}),e.jsx(b,{id:"chronicIllnessType",placeholder:"اذكر نوع المرض المزمن",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("chronicIllnessType")})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse py-1",children:[e.jsx(O,{id:"hasWarInjury",checked:t.watch("hasWarInjury"),onCheckedChange:r=>t.setValue("hasWarInjury",r)}),e.jsx(m,{htmlFor:"hasWarInjury",className:"text-sm sm:text-base font-medium",children:"يعاني من إصابة حرب"})]}),t.watch("hasWarInjury")&&e.jsxs("div",{children:[e.jsx(m,{htmlFor:"warInjuryType",className:"text-sm sm:text-base font-medium",children:"نوع إصابة الحرب"}),e.jsx(b,{id:"warInjuryType",placeholder:"اذكر نوع إصابة الحرب",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("warInjuryType")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 sm:space-x-reverse pt-4 sm:pt-6",children:[e.jsx(c,{type:"button",variant:"outline",onClick:u,className:"w-full sm:w-auto px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base order-2 sm:order-1",children:"إلغاء"}),e.jsx(c,{type:"submit",disabled:o,className:"w-full sm:w-auto px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base order-1 sm:order-2",children:o?"جاري الحفظ...":p?"تحديث":"إضافة"})]})]})}const Ve=te({fullName:n().min(1,"الاسم مطلوب"),memberID:n().regex(/^\d{9}$/,"رقم الهوية يجب أن يكون 9 أرقام").optional(),birthDate:n().min(1,"تاريخ الميلاد مطلوب"),gender:ae(["male","female"],{required_error:"نوع الجنس مطلوب"}),relationship:n().min(1,"القرابة مطلوبة"),isDisabled:w().default(!1),disabilityType:n().optional(),hasChronicIllness:w().default(!1),chronicIllnessType:n().optional()});function Le(){const{toast:x}=pe(),[C,u]=N.useState(!1),[o,p]=N.useState(null),[t,I]=N.useState(null),[r,T]=N.useState(!1),[g,S]=N.useState(1),k=10,{data:l,isLoading:le}=ge({queryKey:["/api/family"]}),h=(l==null?void 0:l.members)||[],re=(l==null?void 0:l.orphans)||[],ie=h.length,ne=h.filter(s=>s.gender==="male").length,me=h.filter(s=>s.gender==="female").length;l!=null&&l.totalMembers,l!=null&&l.numMales,l!=null&&l.numFemales;const F=ee({resolver:se(Ve),defaultValues:{fullName:"",memberID:"",birthDate:"",gender:"male",relationship:"",isDisabled:!1,disabilityType:"",hasChronicIllness:!1,chronicIllnessType:""}}),ce=s=>{u(s),s||(p(null),F.reset({fullName:"",memberID:"",birthDate:"",gender:"male",relationship:"",isDisabled:!1,disabilityType:"",hasChronicIllness:!1,chronicIllnessType:""}))},z=A({mutationFn:async s=>(await V.post("/api/members",s)).data,onSuccess:s=>{P.setQueryData(["/api/family"],a=>a&&a.members?{...a,members:[...a.members,s]}:a),x({title:"تم الإضافة بنجاح",description:"تم إضافة الفرد إلى الأسرة",variant:"default"}),u(!1),p(null)},onError:s=>{x({title:"خطأ في الإضافة",description:s.message,variant:"destructive"})}}),W=A({mutationFn:async({id:s,data:a})=>{console.log("Updating member with ID:",s,"Data:",a);const f=await V.put(`/api/members/${s}`,a);return console.log("Update response status:",f.status),f.data},onSuccess:s=>{P.setQueryData(["/api/family"],a=>a&&a.members?{...a,members:a.members.map(f=>f.id===s.id?s:f)}:a),x({title:"تم التحديث بنجاح",description:"تم تحديث بيانات الفرد",variant:"default"}),u(!1),p(null)},onError:s=>{console.error("Update mutation error:",s),x({title:"خطأ في التحديث",description:s.message,variant:"destructive"})}}),M=A({mutationFn:async s=>{console.log("Attempting to delete member with ID:",s),console.log("Member ID type in mutation:",typeof s);const a=await V.delete(`/api/members/${s}`);return console.log("Delete response status:",a.status),s},onSuccess:s=>{P.setQueryData(["/api/family"],a=>a&&a.members?{...a,members:a.members.filter(f=>f.id!==s)}:a),x({title:"تم الحذف بنجاح",description:"تم حذف الفرد من الأسرة",variant:"default"}),T(!1),I(null)},onError:s=>{console.error("Delete mutation error:",s),x({title:"خطأ في الحذف",description:s.message,variant:"destructive"})}}),de=s=>{console.log("Form submitted with data:",s),o?(console.log("Updating existing member:",o.id),W.mutate({id:o.id,data:s})):(console.log("Creating new member"),z.mutate(s))},H=s=>{console.log("Editing member:",s);const a={id:s.id,memberID:s.memberID||"",fullName:s.fullName||"",birthDate:s.birthDate||"",gender:s.gender||"male",relationship:s.relationship||"",isDisabled:s.isDisabled||!1,disabilityType:s.disabilityType||"",hasChronicIllness:s.hasChronicIllness||!1,chronicIllnessType:s.chronicIllnessType||""};p(a),F.reset(a),u(!0)},U=()=>{p(null),F.reset({fullName:"",memberID:"",birthDate:"",gender:"male",relationship:"",isDisabled:!1,disabilityType:"",hasChronicIllness:!1,chronicIllnessType:""}),u(!0)},q=s=>{console.log("Delete clicked for member:",s),console.log("Member ID:",s.id),console.log("Member ID type:",typeof s.id),console.log("Member ID Number:",Number(s.id)),console.log("Member ID String:",String(s.id)),console.log("Full member object:",JSON.stringify(s,null,2)),I(s),T(!0)},xe=()=>{if(t){console.log("Confirming delete for member:",t),console.log("Delete member ID:",t.id),console.log("Delete member ID type:",typeof t.id);const s=Number(t.id);if(console.log("Converted member ID:",s),isNaN(s)){x({title:"خطأ في المعرف",description:"معرف الفرد غير صحيح",variant:"destructive"});return}M.mutate(s)}},oe=h.filter(s=>{const a=E(s.birthDate);return(s.relationship==="son"||s.relationship==="daughter")&&a<18}).length,he=re.filter(s=>E(s.orphanBirthDate)<18).length,ue=oe+he;h.filter(s=>{const a=E(s.birthDate);return(s.relationship==="son"||s.relationship==="daughter")&&a<18});const $=Math.ceil(h.length/k),B=h.slice((g-1)*k,g*k),{settings:j}=je();return N.useEffect(()=>{j.siteTitle&&(document.title=j.siteTitle),j.language&&(document.documentElement.lang=j.language,document.body.dir=j.language==="ar"?"rtl":"ltr")},[j.siteTitle,j.language]),le?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(X,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"جاري تحميل البيانات..."})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(X,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"أفراد الأسرة"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"إدارة أفراد الأسرة وبياناتهم"})]}),e.jsxs(c,{onClick:U,className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm sm:text-base",children:"إضافة فرد جديد"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[e.jsx(y,{children:e.jsx(v,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-lg",children:e.jsx(D,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي أفراد الأسرة (محسوب)"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:ie}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"أبناء وبنات الأسرة، لا يتضمن الأيتام"})]})]})})}),e.jsx(y,{children:e.jsx(v,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-lg",children:e.jsx(D,{className:"h-5 w-5 sm:h-6 sm:w-6 text-secondary"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الذكور (محسوب)"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:ne}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"من أبناء الأسرة، لا يتضمن الأيتام"})]})]})})}),e.jsx(y,{children:e.jsx(v,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-pink-100 rounded-lg",children:e.jsx(D,{className:"h-5 w-5 sm:h-6 sm:w-6 text-pink-600"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الإناث (محسوب)"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:me}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"من بنات الأسرة، لا يتضمن الأيتام"})]})]})})}),e.jsx(y,{children:e.jsx(v,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-lg",children:e.jsx(D,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الأطفال"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:ue}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"أبناء وبنات الأسرة أقل من 18 سنة (يتم احتساب الأيتام أيضًا)"})]})]})})})]}),e.jsxs(y,{children:[e.jsx(fe,{children:e.jsxs(be,{className:"text-lg sm:text-xl",children:["قائمة أفراد الأسرة (",h.length," فرد)"]})}),e.jsx(v,{children:h.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block sm:hidden space-y-4",children:B.map(s=>e.jsx(y,{className:"border border-gray-200",children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base",children:s.fullName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["رقم الهوية: ",s.memberID||"غير محدد"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>H(s),className:"p-2",children:e.jsx(Y,{className:"h-3 w-3"})}),e.jsx(c,{variant:"destructive",size:"sm",onClick:()=>q(s),className:"p-2",children:e.jsx(Z,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الميلاد:"}),e.jsx("p",{className:"font-medium",children:s.birthDate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"العمر:"}),e.jsx(d,{variant:"outline",className:"text-xs",children:K(s.birthDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"الجنس:"}),e.jsx("p",{className:"font-medium",children:R(s.gender)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"القرابة:"}),e.jsx("p",{className:"font-medium",children:J(s.relationship)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"إعاقة:"}),s.isDisabled?e.jsx(d,{variant:"destructive",className:"mr-2 text-xs",children:"نعم"}):e.jsx(d,{variant:"secondary",className:"mr-2 text-xs",children:"لا"}),e.jsx("span",{className:"text-muted-foreground mr-2",children:"مرض مزمن:"}),s.hasChronicIllness?e.jsx(d,{variant:"destructive",className:"mr-2 text-xs",children:"نعم"}):e.jsx(d,{variant:"secondary",className:"mr-2 text-xs",children:"لا"})]})]})]})})},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-background",children:[e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"الاسم الكامل"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم الهوية"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"تاريخ الميلاد"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"العمر"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"الجنس"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"القرابة"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"إعاقة"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"مرض مزمن"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"الإجراءات"})]})}),e.jsx("tbody",{children:B.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.fullName}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.memberID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.birthDate}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2",children:e.jsx(d,{variant:"outline",className:"text-xs",children:K(s.birthDate)})}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:R(s.gender)}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:J(s.relationship)}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2",children:s.isDisabled?e.jsx(d,{variant:"destructive",className:"text-xs",children:"نعم"}):e.jsx(d,{variant:"secondary",className:"text-xs",children:"لا"})}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2",children:s.hasChronicIllness?e.jsx(d,{variant:"destructive",className:"text-xs",children:"نعم"}):e.jsx(d,{variant:"secondary",className:"text-xs",children:"لا"})}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2",children:e.jsxs("div",{className:"flex space-x-1 sm:space-x-2 space-x-reverse",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>H(s),className:"p-1.5 sm:p-2",children:e.jsx(Y,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(c,{variant:"destructive",size:"sm",onClick:()=>q(s),className:"p-1.5 sm:p-2",children:e.jsx(Z,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[e.jsx(c,{variant:"outline",size:"sm",disabled:g===1,onClick:()=>S(g-1),className:"text-sm",children:"السابق"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from({length:$},(s,a)=>a+1).map(s=>e.jsx(c,{variant:s===g?"default":"outline",size:"sm",onClick:()=>S(s),className:"text-sm min-w-[32px] h-8",children:s},s))}),e.jsx(c,{variant:"outline",size:"sm",disabled:g===$,onClick:()=>S(g+1),className:"text-sm",children:"التالي"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(D,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"لا توجد أفراد مسجلين في الأسرة"}),e.jsx(c,{onClick:U,className:"mt-4 w-full sm:w-auto",children:"إضافة فرد جديد"})]})})]}),e.jsx(Ne,{open:C,onOpenChange:ce,children:e.jsxs(ye,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto sm:w-full",children:[e.jsx(ve,{className:"px-4 sm:px-6",children:e.jsx(De,{className:"text-lg sm:text-xl font-bold text-center",children:o?"تعديل بيانات الفرد":"إضافة فرد جديد"})}),e.jsx("div",{className:"px-4 sm:px-6 py-4",children:e.jsx(Pe,{initialData:o,onSubmit:de,onCancel:()=>{u(!1),p(null)},isLoading:z.isPending||W.isPending,isEdit:!!o})})]})}),e.jsx(we,{open:r,onOpenChange:T,children:e.jsxs(Ie,{className:"w-[95vw] max-w-md mx-auto sm:w-full",children:[e.jsxs(Ce,{className:"px-4 sm:px-6",children:[e.jsx(Te,{className:"text-lg sm:text-xl font-bold text-center",children:"تأكيد الحذف"}),e.jsxs(Se,{className:"text-right text-sm sm:text-base",children:['هل أنت متأكد من حذف الفرد "',t==null?void 0:t.fullName,'"؟',e.jsx("br",{}),"لا يمكن التراجع عن هذا الإجراء."]})]}),e.jsxs(ke,{className:"flex flex-col sm:flex-row justify-center gap-2 px-4 sm:px-6 pb-4 sm:pb-6",children:[e.jsx(Fe,{className:"w-full sm:w-auto",children:"إلغاء"}),e.jsx(Me,{onClick:xe,className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:M.isPending,children:M.isPending?"جاري الحذف...":"حذف"})]})]})})]})]})}export{Le as default};
