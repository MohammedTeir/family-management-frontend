import{Q as T,r as x,O as w,t as Q,a as W,j as e,a5 as D,B as m,C as b,e as C,f as k,l as S,d as L,x as n,I as u,S as E,m as B,n as R,p as z,q as v}from"./index-ZYzdAsGm.js";import{P as Z,S as P,U as $}from"./page-wrapper-DEQQYva8.js";import{S as K}from"./switch-DBFXyOxO.js";import{A as X}from"./arrow-left-HiVoEJvR.js";import"./index-CvI2JamZ.js";import"./baby-B20HtjzY.js";import"./file-text-WTwHpCUH.js";import"./dropdown-menu-C5FzIU9D.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=T("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=T("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=T("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=T("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=T("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),q={siteName:"",siteTitle:"",siteLogo:"",authPageTitle:"نظام إدارة البيانات العائلية",authPageSubtitle:"نظام شامل لإدارة بيانات الأسر وتقديم الطلبات والخدمات",authPageIcon:"",primaryColor:"#3b82f6",secondaryColor:"#64748b",themeMode:"auto",fontFamily:"Cairo",minPasswordLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSpecialChars:!1,maxLoginAttempts:5,lockoutDuration:15,sessionTimeout:60,maintenance:!1,language:"ar"};function te(){const[r,s]=x.useState(q),[t,o]=x.useState(!0),[p,h]=x.useState(null);x.useEffect(()=>{let l=!0;return(async()=>{try{o(!0),h(null);const N=await w.get("/api/settings");if(l){const M={...q,...N.data};s(M)}}catch(N){l&&(h("فشل في تحميل الإعدادات"),console.error("Failed to load admin settings:",N))}finally{l&&o(!1)}})(),()=>{l=!1}},[]);const g=x.useCallback(async()=>{try{o(!0),h(null);const l=await w.get("/api/settings"),y={...q,...l.data};s(y)}catch(l){h("فشل في تحميل الإعدادات"),console.error("Failed to load admin settings:",l)}finally{o(!1)}},[]),f=x.useCallback((l,y)=>{s(N=>({...N,[l]:y}))},[]),j=x.useCallback(()=>{s(q)},[]);return{settings:r,loading:t,error:p,setSettings:s,updateSetting:f,resetSettings:j,reloadSettings:g}}function V(r){r=r.replace("#","");const s=parseInt(r.substr(0,2),16)/255,t=parseInt(r.substr(2,2),16)/255,o=parseInt(r.substr(4,2),16)/255,p=Math.max(s,t,o),h=Math.min(s,t,o);let g=0,f=0,j=(p+h)/2;if(p!==h){const l=p-h;switch(f=j>.5?l/(2-p-h):l/(p+h),p){case s:g=(t-o)/l+(t<o?6:0);break;case t:g=(o-s)/l+2;break;case o:g=(s-t)/l+4;break}g/=6}return`${Math.round(g*360)}, ${Math.round(f*100)}%, ${Math.round(j*100)}%`}function U(r){const s=document.documentElement;if(r.primaryColor){const t=V(r.primaryColor);s.style.setProperty("--primary",`hsl(${t})`),s.style.setProperty("--sidebar-primary",`hsl(${t})`)}if(r.secondaryColor){const t=V(r.secondaryColor);s.style.setProperty("--secondary",`hsl(${t})`)}if(r.themeMode&&(r.themeMode==="light"?document.documentElement.classList.remove("dark"):r.themeMode==="dark"?document.documentElement.classList.add("dark"):r.themeMode==="auto"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))),r.fontFamily){const o={Amiri:"'Amiri', serif",Cairo:"'Cairo', sans-serif",Tajawal:"'Tajawal', sans-serif","Noto Sans Arabic":"'Noto Sans Arabic', sans-serif"}[r.fontFamily]||"'Amiri', serif";s.style.setProperty("--font-family",o),document.body.style.fontFamily=o}}const xe=()=>{const{toast:r}=Q(),{settings:s,setSettings:t,loading:o}=te(),[p,h]=x.useState(!1),[g,f]=x.useState(null),[j,l]=x.useState(""),[y,N]=x.useState(""),[,M]=W();x.useEffect(()=>{s.siteLogo&&!j&&l(s.siteLogo)},[s.siteLogo]),x.useEffect(()=>{(s.primaryColor||s.secondaryColor||s.themeMode||s.fontFamily)&&U(s)},[s.primaryColor,s.secondaryColor,s.themeMode,s.fontFamily]),x.useEffect(()=>{s.siteTitle&&(document.title=s.siteTitle),s.language&&(document.documentElement.lang=s.language,document.body.dir=s.language==="ar"?"rtl":"ltr")},[s.siteTitle,s.language]);const H=a=>{var d;const c=(d=a.target.files)==null?void 0:d[0];if(c){f(c);const i=new FileReader;i.onload=I=>{var F;l((F=I.target)==null?void 0:F.result)},i.readAsDataURL(c)}},G=async()=>{var a,c;h(!0);try{const d={siteName:s.siteName||"",siteTitle:s.siteTitle||"",authPageTitle:s.authPageTitle||"",authPageSubtitle:s.authPageSubtitle||"",siteLogo:g?j:s.siteLogo||"",authPageIcon:s.authPageIcon||"",primaryColor:s.primaryColor||"",secondaryColor:s.secondaryColor||"",themeMode:s.themeMode||"",fontFamily:s.fontFamily||"",minPasswordLength:(s.minPasswordLength??8).toString(),requireUppercase:(!!s.requireUppercase).toString(),requireLowercase:(!!s.requireLowercase).toString(),requireNumbers:(!!s.requireNumbers).toString(),requireSpecialChars:(!!s.requireSpecialChars).toString(),maxLoginAttempts:(s.maxLoginAttempts??5).toString(),lockoutDuration:(s.lockoutDuration??15).toString(),sessionTimeout:(s.sessionTimeout??60).toString()};try{const i=await w.post("/api/settings/bulk",{settings:d});r({title:"نجح",description:i.data.message})}catch(i){r({title:"تحذير",description:((c=(a=i.response)==null?void 0:a.data)==null?void 0:c.message)||"فشل في حفظ بعض الإعدادات",variant:"destructive"})}s.siteTitle&&(document.title=s.siteTitle),U(s)}catch(d){console.error("Settings save error:",d),r({title:"خطأ",description:"فشل في حفظ الإعدادات",variant:"destructive"})}finally{h(!1)}},O=()=>{const a={...s,primaryColor:"#3b82f6",secondaryColor:"#64748b",themeMode:"auto",fontFamily:"Cairo",minPasswordLength:8,requireUppercase:!0,requireLowercase:!0,requireNumbers:!0,requireSpecialChars:!1,maxLoginAttempts:5,lockoutDuration:300,sessionTimeout:60};t(a),U(a)},A=s.maintenance===!0,J=async()=>{const a=!A;try{await w.post("/api/settings",{key:"maintenance",value:a.toString(),description:"وضع الصيانة"}),t(c=>({...c,maintenance:a})),r({title:"تم التحديث",description:`تم ${a?"تفعيل":"إيقاف"} وضع الصيانة`})}catch{r({title:"خطأ",description:"فشل في تحديث وضع الصيانة",variant:"destructive"})}};return o?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(D,{className:"h-8 w-8 animate-spin"})}):e.jsx(Z,{children:e.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"إعدادات النظام"}),e.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"إدارة إعدادات الموقع والعلامة التجارية"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3",children:[e.jsxs(m,{variant:"outline",onClick:()=>M("/admin"),className:"border-border text-foreground hover:bg-muted w-full sm:w-auto",children:[e.jsx(X,{className:"ml-2 h-4 w-4"}),"العودة إلى لوحة التحكم"]}),e.jsx(m,{onClick:G,disabled:p,className:"w-full sm:w-auto",children:p?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"حفظ..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"حفظ الإعدادات"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(k,{children:"إعدادات الموقع/التطبيق"}),e.jsx(S,{children:"تخصيص اسم الموقع والعنوان والشعار"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"siteName",children:"اسم الموقع"}),e.jsx(u,{id:"siteName",value:s.siteName||"",onChange:a=>t({...s,siteName:a.target.value}),placeholder:"أدخل اسم الموقع"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"siteTitle",children:"عنوان الموقع"}),e.jsx(u,{id:"siteTitle",value:s.siteTitle||"",onChange:a=>t({...s,siteTitle:a.target.value}),placeholder:"أدخل عنوان الموقع"})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"شعار الموقع"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(m,{variant:"outline",onClick:()=>{var a;return(a=document.getElementById("logo-upload"))==null?void 0:a.click()},className:"w-full sm:w-auto",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"اختيار ملف"]}),e.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:H,className:"hidden"})]}),(j||s.siteLogo)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:j||s.siteLogo,alt:"Logo preview",className:"h-12 w-auto border rounded"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{f(null),l(""),t({...s,siteLogo:""})},children:"إزالة"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"يفضل استخدام صورة PNG أو JPG بحجم 200x200 بكسل"})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(k,{children:"إعدادات صفحة تسجيل الدخول"}),e.jsx(S,{children:"تخصيص عنوان ووصف وأيقونة صفحة تسجيل الدخول"})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"authPageTitle",children:"عنوان صفحة تسجيل الدخول"}),e.jsx(u,{id:"authPageTitle",value:s.authPageTitle||"",onChange:a=>t({...s,authPageTitle:a.target.value}),placeholder:"نظام إدارة البيانات العائلية"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"authPageSubtitle",children:"وصف صفحة تسجيل الدخول"}),e.jsx(u,{id:"authPageSubtitle",value:s.authPageSubtitle||"",onChange:a=>t({...s,authPageSubtitle:a.target.value}),placeholder:"نظام شامل لإدارة بيانات الأسر وتقديم الطلبات والخدمات"})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"أيقونة صفحة تسجيل الدخول"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(m,{variant:"outline",onClick:()=>{var a;return(a=document.getElementById("auth-icon-upload"))==null?void 0:a.click()},className:"w-full sm:w-auto",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"اختيار ملف"]}),e.jsx("input",{id:"auth-icon-upload",type:"file",accept:"image/*",onChange:a=>{var d;const c=(d=a.target.files)==null?void 0:d[0];if(c){const i=new FileReader;i.onload=I=>{var F;t({...s,authPageIcon:(F=I.target)==null?void 0:F.result})},i.readAsDataURL(c)}},className:"hidden"})]}),s.authPageIcon&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:s.authPageIcon,alt:"Auth icon preview",className:"h-12 w-auto border rounded"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{t({...s,authPageIcon:""})},children:"إزالة"})]})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"يفضل استخدام صورة PNG أو JPG بحجم 48x48 بكسل"})]})]})]}),e.jsxs(b,{children:[e.jsx(C,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx(k,{children:"المظهر و العلامة "}),e.jsx(S,{children:"تخصيص ألوان النظام والخطوط والمظهر العام"})]}),e.jsx(m,{variant:"outline",onClick:O,className:"text-sm w-full sm:w-auto",children:"استخدام الافتراضي"})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"primaryColor",children:"اللون الأساسي"}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-2",children:[e.jsx(u,{id:"primaryColor",type:"color",value:s.primaryColor||"#3b82f6",onChange:a=>t({...s,primaryColor:a.target.value}),className:"w-full xs:w-16 h-10 p-1"}),e.jsx(u,{value:s.primaryColor||"#3b82f6",onChange:a=>t({...s,primaryColor:a.target.value}),placeholder:"#3b82f6",className:"flex-1 min-w-0"}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>t({...s,primaryColor:"#3b82f6"}),className:"text-xs shrink-0",children:"افتراضي"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"secondaryColor",children:"اللون الثانوي"}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-2",children:[e.jsx(u,{id:"secondaryColor",type:"color",value:s.secondaryColor||"#64748b",onChange:a=>t({...s,secondaryColor:a.target.value}),className:"w-full xs:w-16 h-10 p-1"}),e.jsx(u,{value:s.secondaryColor||"#64748b",onChange:a=>t({...s,secondaryColor:a.target.value}),placeholder:"#64748b",className:"flex-1 min-w-0"}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>t({...s,secondaryColor:"#64748b"}),className:"text-xs shrink-0",children:"افتراضي"})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"themeMode",children:"نمط المظهر"}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-2",children:[e.jsxs(E,{value:s.themeMode||"auto",onValueChange:a=>t({...s,themeMode:a}),children:[e.jsx(B,{className:"flex-1",children:e.jsx(R,{placeholder:"اختر نمط المظهر"})}),e.jsxs(z,{children:[e.jsx(v,{value:"light",children:"فاتح"}),e.jsx(v,{value:"dark",children:"داكن"}),e.jsx(v,{value:"auto",children:"تلقائي"})]})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>t({...s,themeMode:"auto"}),className:"text-xs shrink-0",children:"افتراضي"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"fontFamily",children:"نوع الخط"}),e.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-2",children:[e.jsxs(E,{value:s.fontFamily||"Amiri",onValueChange:a=>t({...s,fontFamily:a}),children:[e.jsx(B,{className:"flex-1",children:e.jsx(R,{placeholder:"اختر نوع الخط"})}),e.jsxs(z,{children:[e.jsx(v,{value:"Cairo",children:"القاهرة"}),e.jsx(v,{value:"Amiri",children:"أميري"}),e.jsx(v,{value:"Tajawal",children:"تجوال"}),e.jsx(v,{value:"Noto Sans Arabic",children:"نوتو سانس عربي"})]})]}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>t({...s,fontFamily:"Cairo"}),className:"text-xs shrink-0",children:"افتراضي"})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"معاينة المظهر"}),e.jsx("div",{className:"p-3 sm:p-4 border rounded-lg bg-background",children:e.jsxs("div",{className:"flex flex-col xs:flex-row items-start xs:items-center gap-3 xs:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 xs:w-8 xs:h-8 rounded-full",style:{backgroundColor:s.primaryColor||"#3b82f6"}}),e.jsx("div",{className:"w-6 h-6 xs:w-8 xs:h-8 rounded-full",style:{backgroundColor:s.secondaryColor||"#64748b"}})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs xs:text-sm break-words",style:{fontFamily:s.fontFamily||"Amiri",color:s.primaryColor||"#3b82f6"},children:"هذا مثال على النص العربي مع اللون المختار"}),e.jsx("p",{className:"text-xs text-muted-foreground",style:{fontFamily:s.fontFamily||"Amiri"},children:"نص ثانوي باللون الثانوي"})]})]})})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(k,{children:"سياسة كلمات المرور"}),e.jsx(S,{children:"إعدادات أمان كلمات المرور ومحاولات تسجيل الدخول"})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"متطلبات كلمة المرور"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"minPasswordLength",children:"الحد الأدنى لطول كلمة المرور"}),e.jsx(u,{id:"minPasswordLength",type:"number",min:"4",max:"50",value:s.minPasswordLength||8,onChange:a=>t({...s,minPasswordLength:parseInt(a.target.value)||8}),className:"w-full xs:w-24"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"requireUppercase",checked:!!s.requireUppercase,onChange:a=>t({...s,requireUppercase:a.target.checked}),className:"rounded"}),e.jsx(n,{htmlFor:"requireUppercase",className:"text-sm",children:"تطلب أحرف كبيرة (A-Z)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"requireLowercase",checked:!!s.requireLowercase,onChange:a=>t({...s,requireLowercase:a.target.checked}),className:"rounded"}),e.jsx(n,{htmlFor:"requireLowercase",className:"text-sm",children:"تطلب أحرف صغيرة (a-z)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"requireNumbers",checked:!!s.requireNumbers,onChange:a=>t({...s,requireNumbers:a.target.checked}),className:"rounded"}),e.jsx(n,{htmlFor:"requireNumbers",className:"text-sm",children:"تطلب أرقام (0-9)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"requireSpecialChars",checked:!!s.requireSpecialChars,onChange:a=>t({...s,requireSpecialChars:a.target.checked}),className:"rounded"}),e.jsx(n,{htmlFor:"requireSpecialChars",className:"text-sm",children:"تطلب رموز خاصة (!@#$%^&*)"})]})]})]}),e.jsx(P,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"أمان تسجيل الدخول"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"maxLoginAttempts",children:"الحد الأقصى لمحاولات تسجيل الدخول"}),e.jsx(u,{id:"maxLoginAttempts",type:"number",min:"1",max:"20",value:s.maxLoginAttempts||5,onChange:a=>t({...s,maxLoginAttempts:parseInt(a.target.value)||5}),className:"w-full xs:w-24"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"lockoutDuration",children:"مدة الحظر (دقائق)"}),e.jsx(u,{id:"lockoutDuration",type:"number",min:"1",max:"1440",value:s.lockoutDuration||15,onChange:a=>t({...s,lockoutDuration:parseInt(a.target.value)||15}),className:"w-full xs:w-24"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"sessionTimeout",children:"مدة انتهاء الجلسة (دقائق)"}),e.jsx(u,{id:"sessionTimeout",type:"number",min:"5",max:"1440",value:s.sessionTimeout||60,onChange:a=>t({...s,sessionTimeout:parseInt(a.target.value)||60}),className:"w-full xs:w-24"})]})]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium mb-2",children:"ملخص السياسة الحالية:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["• الحد الأدنى لطول كلمة المرور: ",s.minPasswordLength??8," أحرف"]}),e.jsxs("li",{children:["• متطلبات الأحرف: ",[s.requireUppercase?"أحرف كبيرة":null,s.requireLowercase?"أحرف صغيرة":null,s.requireNumbers?"أرقام":null,s.requireSpecialChars?"رموز خاصة":null].filter(Boolean).join("، ")||"لا توجد متطلبات"]}),e.jsxs("li",{children:["• الحد الأقصى للمحاولات: ",s.maxLoginAttempts??5," محاولات"]}),e.jsxs("li",{children:["• مدة الحظر: ",s.lockoutDuration??15," دقيقة"]}),e.jsxs("li",{children:["• مدة انتهاء الجلسة: ",s.sessionTimeout??60," دقيقة"]})]})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(k,{children:"وضع الصيانة"}),e.jsx(S,{children:"تفعيل وإيقاف وضع الصيانة للموقع. عند تفعيله، سيتم عرض رسالة خاصة للمستخدمين الغير مسجلين."})]}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{checked:A,onCheckedChange:J}),e.jsx("span",{className:"ml-2",children:A?"مفعل":"معطل"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"عند تفعيل وضع الصيانة، سيتم عرض رسالة خاصة للمستخدمين الغير مسجلين في جميع صفحات الموقع. هذا يسمح بإجراء الصيانة اللازمة بدون تأثير على المستخدمين المسجلين."})]})]})]}),e.jsxs(b,{children:[e.jsxs(C,{children:[e.jsx(k,{children:"النسخ الاحتياطي والاستعادة"}),e.jsx(S,{children:"إدارة نسخ البيانات، الاستعادة، ودمج قواعد البيانات بشكل آمن وسهل."})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"p-4 sm:p-6 border rounded-lg bg-background flex flex-col items-center text-center shadow-sm",children:[e.jsx(Y,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mb-2"}),e.jsx("h4",{className:"font-bold mb-1 text-sm sm:text-base",children:"تحميل نسخة احتياطية"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-4",children:"قم بتنزيل نسخة احتياطية كاملة من جميع بيانات النظام والإعدادات."}),e.jsx(m,{variant:"outline",className:"w-full text-xs sm:text-sm",onClick:async()=>{try{const c=(await w.get("/api/admin/backup",{responseType:"blob"})).data,d=window.URL.createObjectURL(c),i=document.createElement("a");i.href=d,i.download=`backup-${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.json`,document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(d),r({title:"تم التحميل",description:"تم تنزيل النسخة الاحتياطية بنجاح"})}catch(a){r({title:"خطأ في النسخ الاحتياطي",description:a.message,variant:"destructive"})}},children:"تحميل النسخة الاحتياطية"})]}),e.jsxs("div",{className:"p-4 sm:p-6 border rounded-lg bg-background flex flex-col items-center text-center shadow-sm",children:[e.jsx(_,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mb-2"}),e.jsx("h4",{className:"font-bold mb-1 text-sm sm:text-base",children:"استعادة نسخة احتياطية"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-4",children:"قم برفع ملف نسخة احتياطية لاستعادة جميع البيانات والإعدادات."}),e.jsx("input",{id:"restore-upload",type:"file",accept:"application/json",style:{display:"none"},onChange:async a=>{var d;const c=(d=a.target.files)==null?void 0:d[0];if(c)try{const i=new FormData;i.append("backup",c),await w.post("/api/admin/restore",i,{headers:{"Content-Type":"multipart/form-data"}}),r({title:"تم الاستعادة",description:"تمت استعادة البيانات بنجاح. يرجى إعادة تحميل الصفحة."})}catch(i){r({title:"خطأ في الاستعادة",description:i.message,variant:"destructive"})}}}),e.jsx(m,{variant:"outline",className:"w-full text-xs sm:text-sm",onClick:()=>{var a;return(a=document.getElementById("restore-upload"))==null?void 0:a.click()},children:"رفع واستعادة"})]}),e.jsxs("div",{className:"p-4 sm:p-6 border rounded-lg bg-background flex flex-col items-center text-center shadow-sm",children:[e.jsx(se,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mb-2"}),e.jsx("h4",{className:"font-bold mb-1 text-sm sm:text-base",children:"دمج تلقائي (موصى به)"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-4",children:"ادمج البيانات مع قاعدة بيانات أخرى بناءً على المعرفات أو التواريخ. مناسب للدمج بين فروع أو نسخ متعددة."}),e.jsx(u,{value:y,onChange:a=>N(a.target.value),placeholder:"رابط قاعدة البيانات للدمج (اتركه فارغاً لاستخدام الافتراضي)",className:"mb-2 text-center text-xs sm:text-sm",dir:"ltr"}),e.jsx(m,{variant:"default",className:"w-full text-xs sm:text-sm",onClick:async()=>{try{const a=await w.post("/api/admin/merge",{url:y});r({title:"تم الدمج",description:a.data.message||"تم دمج البيانات بنجاح"})}catch(a){r({title:"خطأ في الدمج",description:a.message,variant:"destructive"})}},children:"تنفيذ الدمج"})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 text-center text-xs sm:text-sm text-muted-foreground",children:[e.jsx(ee,{className:"inline h-4 w-4 sm:h-5 sm:w-5 mr-1 text-primary align-middle"}),e.jsx("span",{className:"block xs:inline",children:"يشمل النسخ الاحتياطي جميع البيانات والإعدادات. تأكد من حفظ الملف في مكان آمن."}),e.jsx("br",{className:"hidden xs:block"}),e.jsx("span",{className:"block xs:inline mt-2 xs:mt-0",children:"زر الدمج التلقائي يقوم بمقارنة ودمج البيانات مع قاعدة بيانات أخرى بناءً على المعرفات أو التواريخ."})]})]})]})]})})};export{xe as default};
