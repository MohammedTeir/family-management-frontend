import{t as He,r as J,Y as Be,c as Le,i as We,b as _e,j as e,T as de,C as se,e as me,f as ce,d as re,x as R,B,U as Q,M as V,N as k,L as Ye,K as c,V as ae,h as Ue,g as O,k as G,W as Je,y as xe,O as Oe}from"./index-BRVCUzIT.js";import{S as le}from"./switch-CeNQc3pd.js";import{D as Ge,d as qe,a as Ke,b as Qe,c as Ve,e as Xe}from"./dialog-D51Jx8ed.js";import{a as g}from"./dropdown-menu-DdnnckdS.js";import{E as he}from"./exceljs.min-Cz8xvZTz.js";import{B as Ze,H as et,G as tt,E as ge,a as W}from"./jspdf.plugin.autotable-C81NVNa4.js";import{H as ne}from"./header--JBEaVK1.js";import{P as ue}from"./printer-Bw-LSgjh.js";import{F as fe}from"./file-text-Bxr2bFQ2.js";import{F as be}from"./file-spreadsheet-Bd2LZWmb.js";import{P as pe}from"./phone-FUN1W9cr.js";import{M as st}from"./map-pin-CJflmUvF.js";import{T as je}from"./triangle-alert-BLBGP7Kv.js";import"./index-uwi08Yf3.js";function jt(){const{toast:S}=He(),[X,Ne]=J.useState(!0),[ie,we]=J.useState(!0),[oe,ye]=J.useState(!0),[Fe,q]=J.useState(!1),[rt,Z]=Be("/admin/families/:id/summary"),K=Z==null?void 0:Z.id,{data:t,isLoading:De,error:at}=Le({queryKey:["/api/admin/families",K],enabled:!!K,queryFn:async()=>(await Oe.get(`/api/admin/families/${K}`)).data}),u=(t==null?void 0:t.members)||[],i=u.filter(r=>We(r.birthDate)),ve=u.length,Se=u.filter(r=>r.gender==="male").length,Ce=u.filter(r=>r.gender==="female").length,ke=(t==null?void 0:t.totalMembers)||0,Ae=(t==null?void 0:t.numMales)||0,Te=(t==null?void 0:t.numFemales)||0,A=r=>{if(!r)return"غير محدد";const n=new Date,s=new Date(r),o=n.getFullYear()-s.getFullYear(),m=n.getMonth()-s.getMonth(),p=n.getDate()-s.getDate();let f=o,N=m,F=p;if(F<0){const b=new Date(n.getFullYear(),n.getMonth()-1,s.getDate());F=Math.floor((n.getTime()-b.getTime())/(1e3*60*60*24)),N--}return N<0&&(N+=12,f--),f===0?N===0?`‫${F} يوم‬`:F===0?`‫${N} شهر‬`:`‫${N} شهر و ${F} يوم‬`:`‫${f} سنة‬`},Pe=()=>{window.print(),S({title:"طباعة",description:"تم إرسال المستند للطابعة"})},$e=async()=>{try{const r=()=>t.isAbroad?t.abroadLocation||"مغترب بالخارج":t.isDisplaced?"نازح":"مقيم",n=a=>xe(a).replace(/\u202B/g,"").replace(/\u202C/g,""),s=new ge("p","mm","a4");let o=!1;try{o=await loadAmiriFonts(s),o?(console.log("Amiri fonts loaded successfully"),s.setFont("Amiri","normal")):(console.log("Falling back to default font"),s.setFont("helvetica"))}catch(a){console.error("Font loading failed:",a),s.setFont("helvetica"),o=!1}s.setFontSize(16),s.setFillColor(76,175,80),s.rect(10,10,190,15,"F"),s.setTextColor(255,255,255),s.text("بيانات الأسرة - تقرير مفصل",105,20,{align:"center"}),s.setTextColor(0,0,0),s.setFontSize(12);const m=new Date,p=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`,f=m.getHours(),N=m.getMinutes(),F=f>=12?"م":"ص",b=f%12||12,E=`${F} ${b}:${String(N).padStart(2,"0")}`;s.text(`تاريخ التصدير: ${p}`,105,35,{align:"center"}),s.text(`وقت التصدير: ${E}`,105,42,{align:"center"}),s.setFontSize(14),s.setFillColor(76,175,80),s.rect(10,50,190,8,"F"),s.setTextColor(255,255,255),s.text("بيانات الأسرة",105,56,{align:"center"}),s.setTextColor(0,0,0),s.setFontSize(10);const D=[["اسم الزوج رباعي",t.husbandName||""],["رقم هوية الزوج",t.husbandID||""],["عمل الزوج",t.husbandJob||""],["اسم الزوجة رباعي",t.wifeName||""],["رقم هوية الزوجة",t.wifeID||""],["عمل الزوجة",t.wifeJob||""],["هل الزوجة حامل",t.wifePregnant?"نعم":"لا"],["رقم الجوال للتواصل",t.primaryPhone||""],["رقم الجوال البديل",t.secondaryPhone||""],["السكن الأصلي",t.originalResidence||""],["حالة السكن الحالي",r()],["الاضرار الناجمة عن حرب 2023",t.warDamage2023?t.warDamageDescription||"نعم":"لا"],["الفرع",O(t.branch)||""],["هل يوجد افراد ذوي اعاقة في العائلة",t.hasDisabledMembers?"نعم":"لا"],["هل لديك ابناء اقل من سنتين",t.hasChildrenUnderTwo?"نعم":"لا"],["إجمالي أفراد الأسرة",(t.totalMembers||0).toString()],["عدد الذكور",(t.numMales||0).toString()],["عدد الإناث",(t.numFemales||0).toString()],["عدد الأطفال",i.length.toString()],["الحالة الاجتماعية",G(t.socialStatus)||""],["مغترب بالخارج",t.isAbroad?"نعم":"لا"]];if(W(s,{startY:70,head:[["المعلومات","البيان"]],body:D.map(a=>[a[1],a[0]]),theme:"grid",headStyles:{fillColor:[76,175,80],textColor:[255,255,255],fontStyle:"bold",font:o?"Amiri":"helvetica",halign:"center"},styles:{fontSize:9,cellPadding:3,font:o?"Amiri":"helvetica",textColor:[0,0,0]},columnStyles:{0:{cellMinWidth:40,halign:"center"},1:{cellMinWidth:60,halign:"right"}}}),u&&u.length>0){s.addPage(),s.setFontSize(14),s.setFillColor(76,175,80),s.rect(10,10,190,8,"F"),s.setTextColor(255,255,255),s.text("أفراد الأسرة",105,16,{align:"center"}),s.setTextColor(0,0,0),s.setFontSize(10);const a=u.map(d=>[d.isDisabled?d.disabilityType||"غير محدد":"",d.isDisabled?"نعم":"لا",k(d.relationship),d.gender==="male"?"ذكر":"أنثى",n(d.birthDate),d.birthDate||"",d.memberID||"",d.fullName||""]);W(s,{startY:30,head:[["نوع الإعاقة","إعاقة","القرابة","الجنس","العمر","تاريخ الميلاد","رقم الهوية","الاسم الكامل"]],body:a,theme:"grid",headStyles:{fillColor:[76,175,80],textColor:[255,255,255],fontStyle:"bold",font:o?"Amiri":"helvetica",halign:"center"},styles:{fontSize:8,cellPadding:2,font:o?"Amiri":"helvetica",textColor:[0,0,0]},columnStyles:{0:{halign:"center"},1:{halign:"center"},2:{halign:"center"},3:{halign:"center"},4:{halign:"center"},5:{halign:"center"},6:{halign:"center"},7:{halign:"right"}}})}if(i.length>0){s.addPage(),s.setFontSize(14),s.setFillColor(76,175,80),s.rect(10,10,190,8,"F"),s.setTextColor(255,255,255),s.text("تفاصيل الأطفال",105,16,{align:"center"}),s.setTextColor(0,0,0),s.setFontSize(10);const d=[...i].sort((x,T)=>{const I=c(x.birthDate),P=c(T.birthDate);return I<2&&P>=2?-1:I>=2&&P<2?1:I-P}).map(x=>[x.isDisabled?x.disabilityType||"غير محدد":"",x.isDisabled?"نعم":"لا",k(x.relationship),x.gender==="male"?"ذكر":"أنثى",n(x.birthDate),x.birthDate||"",x.memberID||"",x.fullName||""]);W(s,{startY:30,head:[["نوع الإعاقة","إعاقة","القرابة","الجنس","العمر","تاريخ الميلاد","رقم الهوية","الاسم الكامل"]],body:d,theme:"grid",headStyles:{fillColor:[76,175,80],textColor:[255,255,255],fontStyle:"bold",font:o?"Amiri":"helvetica",halign:"center"},styles:{fontSize:8,cellPadding:2,font:o?"Amiri":"helvetica",textColor:[0,0,0]},columnStyles:{0:{halign:"center"},1:{halign:"center"},2:{halign:"center"},3:{halign:"center"},4:{halign:"center"},5:{halign:"center"},6:{halign:"center"},7:{halign:"right"}}})}s.addPage(),s.setFontSize(14),s.setFillColor(76,175,80),s.rect(10,10,190,8,"F"),s.setTextColor(255,255,255),s.text("الملخص الإحصائي",105,16,{align:"center"}),s.setTextColor(0,0,0),s.setFontSize(10);const C=[["إجمالي أفراد الأسرة",(t.totalMembers||0).toString()],["عدد الذكور",(t.numMales||0).toString()],["عدد الإناث",(t.numFemales||0).toString()],["عدد الأطفال",i.length.toString()],["الأبناء",i.filter(a=>a.gender==="male").length.toString()],["البنات",i.filter(a=>a.gender==="female").length.toString()],["الحالة الاجتماعية",t.socialStatus?G(t.socialStatus):"غير محدد"],...t.wifePregnant!==void 0?[["حالة الحمل",t.wifePregnant?"حامل":"غير حامل"]]:[],["نازح",t.isDisplaced?"نعم":"لا"],["موقع النزوح",t.isDisplaced&&t.displacedLocation||""],["مغترب بالخارج",t.isAbroad?"نعم":"لا"],["أضرار الحرب 2023",t.warDamage2023?"نعم":"لا"],["تفاصيل الأضرار",t.warDamage2023&&t.warDamageDescription||""],["إجمالي المعاقين",(u?u.filter(a=>a.isDisabled).length:0).toString()],["الأطفال المعاقين",i.filter(a=>a.isDisabled).length.toString()],["الأطفال أقل من سنتين",i.filter(a=>c(a.birthDate)<2).length.toString()],["الفرع",O(t.branch)||"غير محدد"],["تاريخ التصدير",p],["وقت التصدير",E],["ملاحظات إدارية",t.adminNotes||"لا توجد ملاحظات"]];W(s,{startY:30,head:[["المعلومات","البيان"]],body:C.map(a=>[a[1],a[0]]),theme:"grid",headStyles:{fillColor:[76,175,80],textColor:[255,255,255],fontStyle:"bold",font:o?"Amiri":"helvetica",halign:"center"},styles:{fontSize:9,cellPadding:3,font:o?"Amiri":"helvetica",textColor:[0,0,0]},columnStyles:{0:{cellMinWidth:40,halign:"center"},1:{cellMinWidth:60,halign:"right"}}});const v=`family_data_${t.husbandName}_${p}.pdf`;s.save(v),S({title:"تم التصدير بنجاح",description:`تم حفظ ملف PDF باسم: ${v}`,variant:"default"})}catch(r){console.error("Error exporting to PDF:",r),S({title:"خطأ في التصدير",description:"حدث خطأ أثناء تصدير البيانات إلى PDF",variant:"destructive"})}},Re=async()=>{try{const r=()=>t.isAbroad?t.abroadLocation||"مغترب بالخارج":t.isDisplaced?"نازح":"مقيم",n=t.wifeName?[{wifeName:t.wifeName,wifeID:t.wifeID,wifeJob:t.wifeJob,wifeBirthDate:t.wifeBirthDate,wifePregnant:t.wifePregnant}]:[],s=new he.Workbook,o={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4CAF50"}},font:{color:{argb:"FFFFFFFF"},bold:!0,size:16},alignment:{horizontal:"center",vertical:"middle"}},m={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4CAF50"}},font:{color:{argb:"FFFFFFFF"},bold:!0,size:12},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin",color:{argb:"FFFFFFFF"}},bottom:{style:"thin",color:{argb:"FFFFFFFF"}},left:{style:"thin",color:{argb:"FFFFFFFF"}},right:{style:"thin",color:{argb:"FFFFFFFF"}}}},p={alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},f=s.addWorksheet("بيانات الأسرة"),N=n.length>0?["هل الزوجة حامل","عمل الزوجة","عمر الزوجة","تاريخ ميلاد الزوجة","رقم هوية الزوجة","اسم الزوجة رباعي"]:[],F=n.length>0?[n[0].wifePregnant?"نعم":"لا",n[0].wifeJob||"",A(n[0].wifeBirthDate||""),n[0].wifeBirthDate||"",n[0].wifeID||"",n[0].wifeName||""]:[],b=["مغترب بالخارج","الحالة الاجتماعية","عدد الأطفال","عدد الإناث","عدد الذكور","إجمالي أفراد الأسرة","هل لديك ابناء اقل من سنتين","هل يوجد افراد ذوي اعاقة في العائلة","الفرع","الاضرار الناجمة عن حرب 2023","حالة السكن الحالي","السكن الأصلي","رقم الجوال البديل","رقم الجوال للتواصل",...N,"عمل الزوج","عمر الزوج","تاريخ ميلاد الزوج","رقم هوية الزوج","اسم الزوج رباعي"],E=[t.isAbroad?"نعم":"لا",G(t.socialStatus)||"",i.length,t.numFemales||0,t.numMales||0,t.totalMembers||0,t.hasChildrenUnderTwo?"نعم":"لا",t.hasDisabledMembers?"نعم":"لا",O(t.branch)||"",t.warDamage2023?t.warDamageDescription||"نعم":"لا",r(),t.originalResidence||"",t.secondaryPhone||"",t.primaryPhone||"",...F,t.husbandJob||"",A(t.husbandBirthDate||""),t.husbandBirthDate||"",t.husbandID||"",t.husbandName||""],D=f.addRow(["بيانات الأسرة - تقرير مفصل"]);D.getCell(1).style=o,D.height=30,f.mergeCells(`A1:${String.fromCharCode(65+b.length-1)}1`);const C=f.addRow(b);C.height=25,C.eachCell(l=>{l.style=m});const v=f.addRow(E);if(v.height=20,v.eachCell(l=>{l.style=p}),[18,20,15,15,15,20,25,30,25,30,20,25,20,20,15,20,15,20,20,25,20,15,20,20,25].forEach((l,j)=>{f.getColumn(j+1).width=l}),u&&u.length>0){const l=s.addWorksheet("أفراد الأسرة"),j=["نوع الإعاقة","هل يوجد إعاقة","القرابة","الجنس","العمر","تاريخ الميلاد","رقم الهوية","الاسم الكامل"],y=l.addRow(["أفراد الأسرة"]);y.getCell(1).style=o,y.height=30,l.mergeCells(`A1:${String.fromCharCode(65+j.length-1)}1`);const $=l.addRow(j);$.height=25,$.eachCell(w=>{w.style=m}),u.forEach(w=>{const h=[w.isDisabled?w.disabilityType||"غير محدد":"",w.isDisabled?"نعم":"لا",k(w.relationship),w.gender==="male"?"ذكر":"أنثى",A(w.birthDate),w.birthDate||"",w.memberID||"",w.fullName||""],z=l.addRow(h);z.height=20,z.eachCell(H=>{H.style=p})}),[20,15,15,12,12,15,18,30].forEach((w,h)=>{l.getColumn(h+1).width=w})}if(i.length>0){const l=s.addWorksheet("الأطفال"),j=["نوع الإعاقة","هل يوجد إعاقة","القرابة","الجنس","العمر","تاريخ الميلاد","رقم الهوية","الاسم الكامل"],y=l.addRow(["تفاصيل الأطفال"]);y.getCell(1).style=o,y.height=30,l.mergeCells(`A1:${String.fromCharCode(65+j.length-1)}1`);const $=l.addRow(j);$.height=25,$.eachCell(h=>{h.style=m}),[...i].sort((h,z)=>{const H=c(h.birthDate),U=c(z.birthDate);return H<2&&U>=2?-1:H>=2&&U<2?1:H-U}).forEach(h=>{const z=[h.isDisabled?h.disabilityType||"غير محدد":"",h.isDisabled?"نعم":"لا",k(h.relationship),h.gender==="male"?"ذكر":"أنثى",A(h.birthDate),h.birthDate||"",h.memberID||"",h.fullName||""],H=l.addRow(z);H.height=20,H.eachCell(U=>{U.style=p})}),[20,15,15,12,12,15,18,30].forEach((h,z)=>{l.getColumn(z+1).width=h})}const d=s.addWorksheet("الملخص"),x=["المعلومات","القيمة"],T=[["إجمالي أفراد الأسرة",(t.totalMembers||0).toString()],["عدد الذكور",(t.numMales||0).toString()],["عدد الإناث",(t.numFemales||0).toString()],["عدد الأطفال",i.length.toString()],["الأبناء",i.filter(l=>l.gender==="male").length.toString()],["البنات",i.filter(l=>l.gender==="female").length.toString()],["الحالة الاجتماعية",t.socialStatus?G(t.socialStatus):"غير محدد"],...n.length>0?[["حالة الحمل",n[0].wifePregnant?"حامل":"غير حامل"]]:[],["نازح",t.isDisplaced?"نعم":"لا"],["موقع النزوح",t.isDisplaced&&t.displacedLocation||""],["مغترب بالخارج",t.isAbroad?"نعم":"لا"],["أضرار الحرب 2023",t.warDamage2023?"نعم":"لا"],["تفاصيل الأضرار",t.warDamage2023&&t.warDamageDescription||""],["إجمالي المعاقين",(u?u.filter(l=>l.isDisabled).length:0).toString()],["الأطفال المعاقين",i.filter(l=>l.isDisabled).length.toString()],["الأطفال أقل من سنتين",i.filter(l=>c(l.birthDate)<2).length.toString()],["الفرع",O(t.branch)||"غير محدد"],["تاريخ التصدير",new Date().toLocaleDateString("ar-EG")],["وقت التصدير",new Date().toLocaleTimeString("ar-EG")],["ملاحظات إدارية",t.adminNotes||"لا توجد ملاحظات"]],I=d.addRow(["الملخص الإحصائي"]);I.getCell(1).style=o,I.height=30,d.mergeCells("A1:B1");const P=d.addRow(x);P.height=25,P.eachCell(l=>{l.style=m}),T.forEach(([l,j])=>{const y=d.addRow([l,j]);y.height=20,y.eachCell($=>{$.style=p})}),d.getColumn(1).width=30,d.getColumn(2).width=20;const _=`family_data_${t.husbandName}_${new Date().toISOString().split("T")[0]}.xlsx`,ee=await s.xlsx.writeBuffer(),te=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Y=window.URL.createObjectURL(te),L=document.createElement("a");L.href=Y,L.download=_,L.click(),window.URL.revokeObjectURL(Y),S({title:"تم التصدير بنجاح",description:`تم حفظ ملف Excel باسم: ${_}`,variant:"default"})}catch(r){console.error("Error exporting to Excel:",r),S({title:"خطأ في التصدير",description:"حدث خطأ أثناء تصدير البيانات إلى Excel",variant:"destructive"})}},Me=()=>{q(!1),S({title:"طباعة بيانات الأطفال",description:"تم إرسال بيانات الأطفال للطابعة"})},Ee=async()=>{try{q(!1);const r=a=>xe(a).replace(/\u202B/g,"").replace(/\u202C/g,""),n=new ge("p","mm","a4");let s=!1;try{s=await loadAmiriFonts(n),s?(console.log("Amiri fonts loaded successfully"),n.setFont("Amiri","normal")):(console.log("Falling back to default font"),n.setFont("helvetica"))}catch(a){console.error("Font loading failed:",a),n.setFont("helvetica"),s=!1}n.setFontSize(16),n.setFillColor(76,175,80),n.rect(10,10,190,15,"F"),n.setTextColor(255,255,255),n.text("تفاصيل الأطفال - تقرير مفصل",105,20,{align:"center"}),n.setTextColor(0,0,0),n.setFontSize(12);const o=new Date,m=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`,p=o.getHours(),f=o.getMinutes(),N=p>=12?"م":"ص",F=p%12||12,b=`${N} ${F}:${String(f).padStart(2,"0")}`;n.text(`اسم رب الأسرة: ${t.husbandName}`,105,35,{align:"center"}),n.text(`تاريخ التصدير: ${m}`,105,42,{align:"center"}),n.text(`وقت التصدير: ${b}`,105,49,{align:"center"}),n.setFontSize(14),n.setFillColor(76,175,80),n.rect(10,60,190,8,"F"),n.setTextColor(255,255,255),n.text("تفاصيل الأطفال",105,66,{align:"center"}),n.setTextColor(0,0,0),n.setFontSize(10);const D=[...i].sort((a,d)=>{const x=c(a.birthDate),T=c(d.birthDate);return x<2&&T>=2?-1:x>=2&&T<2?1:x-T}).map(a=>[a.isDisabled?a.disabilityType||"غير محدد":"",a.isDisabled?"نعم":"لا",k(a.relationship),a.gender==="male"?"ذكر":"أنثى",r(a.birthDate),a.birthDate||"",a.memberID||"",a.fullName||""]);W(n,{startY:80,head:[["نوع الإعاقة","إعاقة","القرابة","الجنس","العمر","تاريخ الميلاد","رقم الهوية","الاسم الكامل"]],body:D,theme:"grid",headStyles:{fillColor:[76,175,80],textColor:[255,255,255],fontStyle:"bold",font:s?"Amiri":"helvetica",halign:"center"},styles:{fontSize:8,cellPadding:2,font:s?"Amiri":"helvetica",textColor:[0,0,0]},columnStyles:{0:{halign:"center"},1:{halign:"center"},2:{halign:"center"},3:{halign:"center"},4:{halign:"center"},5:{halign:"center"},6:{halign:"center"},7:{halign:"right"}}}),n.addPage(),n.setFontSize(14),n.setFillColor(76,175,80),n.rect(10,10,190,8,"F"),n.setTextColor(255,255,255),n.text("الملخص الإحصائي للأطفال",105,16,{align:"center"}),n.setTextColor(0,0,0),n.setFontSize(10);const C=[["إجمالي الأطفال",i.length.toString()],["الأبناء",i.filter(a=>a.gender==="male").length.toString()],["البنات",i.filter(a=>a.gender==="female").length.toString()],["الأطفال المعاقين",i.filter(a=>a.isDisabled).length.toString()],["الأطفال أقل من سنة",i.filter(a=>c(a.birthDate)<1).length.toString()],["الأطفال من سنة إلى سنتين",i.filter(a=>c(a.birthDate)>=1&&c(a.birthDate)<2).length.toString()],["الأطفال من سنتين إلى 5 سنوات",i.filter(a=>c(a.birthDate)>=2&&c(a.birthDate)<5).length.toString()],["الأطفال من 5 سنوات إلى 12 سنة",i.filter(a=>c(a.birthDate)>=5&&c(a.birthDate)<12).length.toString()],["الأطفال من 12 سنة إلى 18 سنة",i.filter(a=>c(a.birthDate)>=12&&c(a.birthDate)<18).length.toString()],["اسم رب الأسرة",t.husbandName||""],["تاريخ التصدير",m],["وقت التصدير",b]];W(n,{startY:30,head:[["المعلومات","البيان"]],body:C.map(a=>[a[1],a[0]]),theme:"grid",headStyles:{fillColor:[76,175,80],textColor:[255,255,255],fontStyle:"bold",font:s?"Amiri":"helvetica",halign:"center"},styles:{fontSize:9,cellPadding:3,font:s?"Amiri":"helvetica",textColor:[0,0,0]},columnStyles:{0:{cellMinWidth:40,halign:"center"},1:{cellMinWidth:60,halign:"right"}}});const v=`children_data_${t.husbandName}_${m}.pdf`;n.save(v),S({title:"تم التصدير بنجاح",description:`تم حفظ ملف PDF باسم: ${v}`,variant:"default"})}catch(r){console.error("Error exporting children to PDF:",r),S({title:"خطأ في التصدير",description:"حدث خطأ أثناء تصدير بيانات الأطفال إلى PDF",variant:"destructive"})}},Ie=async()=>{try{q(!1);const r=new he.Workbook,n={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4CAF50"}},font:{color:{argb:"FFFFFFFF"},bold:!0,size:16},alignment:{horizontal:"center",vertical:"middle"}},s={fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF4CAF50"}},font:{color:{argb:"FFFFFFFF"},bold:!0,size:12},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin",color:{argb:"FFFFFFFF"}},bottom:{style:"thin",color:{argb:"FFFFFFFF"}},left:{style:"thin",color:{argb:"FFFFFFFF"}},right:{style:"thin",color:{argb:"FFFFFFFF"}}}},o={alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}},m=r.addWorksheet("بيانات الأطفال"),p=["نوع الإعاقة","هل يوجد إعاقة","القرابة","الجنس","العمر","تاريخ الميلاد","رقم الهوية","الاسم الكامل"],f=m.addRow([`تفاصيل الأطفال - ${t.husbandName}`]);f.getCell(1).style=n,f.height=30,m.mergeCells(`A1:${String.fromCharCode(65+p.length-1)}1`);const N=m.addRow(p);N.height=25,N.eachCell(l=>{l.style=s}),i.forEach(l=>{const j=[l.isDisabled?l.disabilityType||"غير محدد":"",l.isDisabled?"نعم":"لا",k(l.relationship),l.gender==="male"?"ذكر":"أنثى",A(l.birthDate),l.birthDate||"",l.memberID||"",l.fullName||""],y=m.addRow(j);y.height=20,y.eachCell($=>{$.style=o})}),[20,15,15,12,12,15,18,30].forEach((l,j)=>{m.getColumn(j+1).width=l});const b=r.addWorksheet("ملخص إحصائي للأطفال"),E=["التفاصيل","القيمة","المعلومات"],D=new Date,C=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,v=D.getHours(),a=D.getMinutes(),d=v>=12?"م":"ص",x=v%12||12,T=`${d} ${x}:${String(a).padStart(2,"0")}`,I=[["",i.length,"إجمالي الأطفال"],["",i.filter(l=>l.gender==="male").length,"الأبناء"],["",i.filter(l=>l.gender==="female").length,"البنات"],["",i.filter(l=>l.isDisabled).length,"الأطفال المعاقين"],["",i.filter(l=>c(l.birthDate)<1).length,"الأطفال أقل من سنة"],["",i.filter(l=>c(l.birthDate)>=1&&c(l.birthDate)<2).length,"الأطفال من سنة إلى سنتين"],["",t.husbandName||"","اسم رب الأسرة"],["",C,"تاريخ التصدير"],["",T,"وقت التصدير"]],P=b.addRow(["ملخص إحصائي للأطفال"]);P.getCell(1).style=n,P.height=30,b.mergeCells(`A1:${String.fromCharCode(65+E.length-1)}1`);const _=b.addRow(E);_.height=25,_.eachCell(l=>{l.style=s}),I.forEach(l=>{const j=b.addRow(l);j.height=20,j.eachCell(y=>{y.style=o})}),b.getColumn(1).width=40,b.getColumn(2).width=20,b.getColumn(3).width=30;const ee=await r.xlsx.writeBuffer(),te=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Y=window.URL.createObjectURL(te),L=document.createElement("a");L.href=Y,L.download=`children_data_${t.husbandName}_${C}.xlsx`,L.click(),window.URL.revokeObjectURL(Y),S({title:"تم التصدير بنجاح",description:`تم حفظ ملف Excel باسم: children_data_${t.husbandName}_${C}.xlsx`,variant:"default"})}catch(r){console.error("Error exporting children to Excel:",r),S({title:"خطأ في التصدير",description:"حدث خطأ أثناء تصدير بيانات الأطفال إلى Excel",variant:"destructive"})}},{settings:M}=_e();return J.useEffect(()=>{M.siteTitle&&(document.title=M.siteTitle),M.language&&(document.documentElement.lang=M.language,document.body.dir=M.language==="ar"?"rtl":"ltr")},[M.siteTitle,M.language]),De?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ne,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"جاري تحميل البيانات..."})})]}):t?e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(ne,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 print-only",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-foreground mb-2",children:"بيانات الأسرة - تقرير مفصل"}),e.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground",children:["تاريخ الطباعة: ",de()]})]}),e.jsxs(se,{className:"mb-4 sm:mb-6 no-print",children:[e.jsx(me,{children:e.jsx(ce,{className:"text-lg sm:text-xl",children:"إعدادات العرض والطباعة"})}),e.jsxs(re,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(le,{id:"showSensitiveInfo",checked:X,onCheckedChange:Ne}),e.jsx(R,{htmlFor:"showSensitiveInfo",className:"text-sm sm:text-base",children:"عرض المعلومات الحساسة"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(le,{id:"showMembers",checked:ie,onCheckedChange:we}),e.jsx(R,{htmlFor:"showMembers",className:"text-sm sm:text-base",children:"عرض أفراد الأسرة"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(le,{id:"showHousingInfo",checked:oe,onCheckedChange:ye}),e.jsx(R,{htmlFor:"showHousingInfo",className:"text-sm sm:text-base",children:"عرض بيانات السكن"})]}),e.jsxs(Ge,{open:Fe,onOpenChange:q,children:[e.jsx(qe,{asChild:!0,children:e.jsxs(B,{variant:"outline",className:"w-full text-sm sm:text-base",children:[e.jsx(Q,{className:"h-4 w-4 ml-2"}),"بيانات الأطفال"]})}),e.jsxs(Ke,{className:"max-w-4xl mx-4",children:[e.jsxs(Qe,{children:[e.jsxs(Ve,{className:"text-center text-lg sm:text-xl",children:["بيانات الأطفال - ",t.husbandName]}),e.jsx(Xe,{className:"text-center text-sm sm:text-base",children:"عرض تفاصيل جميع الأطفال في الأسرة مع إمكانية التصدير والطباعة"})]}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي الأطفال"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:i.filter(r=>r.gender==="male").length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"الأبناء"})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-pink-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-pink-600",children:i.filter(r=>r.gender==="female").length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"البنات"})]})]}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-background",children:[e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"الاسم الكامل"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"رقم الهوية"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"تاريخ الميلاد"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"العمر"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"الجنس"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"القرابة"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"إعاقة"})]})}),e.jsx("tbody",{children:i.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:r.fullName}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:r.memberID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:r.birthDate}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2",children:e.jsx(g,{variant:"outline",className:"text-xs",children:A(r.birthDate)})}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:V(r.gender)}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:k(r.relationship)}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2",children:r.isDisabled?e.jsx(g,{variant:"destructive",className:"text-xs",children:"نعم"}):e.jsx(g,{variant:"secondary",className:"text-xs",children:"لا"})})]},r.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:i.map(r=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-foreground text-sm",children:r.fullName}),r.isDisabled?e.jsx(g,{variant:"destructive",className:"text-xs",children:"معاق"}):e.jsx(g,{variant:"secondary",className:"text-xs",children:"سليم"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"رقم الهوية:"}),e.jsx("span",{className:"mr-1",children:r.memberID||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"الجنس:"}),e.jsx("span",{className:"mr-1",children:V(r.gender)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الميلاد:"}),e.jsx("span",{className:"mr-1",children:r.birthDate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"العمر:"}),e.jsx("span",{className:"mr-1",children:A(r.birthDate)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"القرابة:"}),e.jsx("span",{className:"mr-1",children:k(r.relationship)})]})]})]},r.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-2 sm:gap-3 pt-4",children:[e.jsxs(B,{onClick:Me,variant:"outline",className:"w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(ue,{className:"h-4 w-4 ml-2"}),"طباعة"]}),e.jsxs(B,{onClick:Ee,variant:"outline",className:"w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(fe,{className:"h-4 w-4 ml-2"}),"PDF"]}),e.jsxs(B,{onClick:Ie,variant:"outline",className:"w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(be,{className:"h-4 w-4 ml-2"}),"Excel"]})]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 justify-center",children:[e.jsxs(B,{onClick:Pe,className:"bg-primary text-primary-foreground w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(ue,{className:"h-4 w-4 ml-2"}),"طباعة"]}),e.jsxs(B,{onClick:$e,className:"bg-red-600 text-white hover:bg-red-700 w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(fe,{className:"h-4 w-4 ml-2"}),"PDF"]}),e.jsxs(B,{onClick:Re,className:"bg-green-600 text-white hover:bg-green-700 w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(be,{className:"h-4 w-4 ml-2"}),"Excel"]}),e.jsx(Ye,{href:`/admin/families/${K}/edit`,children:e.jsxs(B,{variant:"outline",className:"bg-blue-600 text-white hover:bg-blue-700 w-full sm:w-auto text-sm sm:text-base",children:[e.jsx(Q,{className:"h-4 w-4 ml-2"}),"تعديل أفراد الأسرة"]})})]})]})]}),e.jsx(se,{className:"print-card",children:e.jsxs(re,{className:"p-8",children:[e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-3 sm:mb-4 pb-2 border-b border-gray-300 flex items-center",children:[e.jsx(Ze,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),"بيانات رب الأسرة"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"الاسم الرباعي"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground break-words",children:t.husbandName})]}),X&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"رقم الهوية"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground",children:t.husbandID})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"تاريخ الميلاد"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground",children:t.husbandBirthDate}),e.jsxs(g,{variant:"outline",className:"text-xs w-fit",children:[c(t.husbandBirthDate)," سنة"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"المهنة"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground break-words",children:t.husbandJob})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"رقم الجوال الأساسي"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground",children:t.primaryPhone})]})]}),t.secondaryPhone&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"رقم الجوال البديل"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground",children:t.secondaryPhone})]})]})]})]}),t.wifeName&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-3 sm:mb-4 pb-2 border-b border-gray-300 flex items-center",children:[e.jsx(et,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),"بيانات الزوجة"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"الاسم الرباعي"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground break-words",children:t.wifeName})]}),X&&t.wifeID&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"رقم الهوية"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground",children:t.wifeID})]}),t.wifeBirthDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"تاريخ الميلاد"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground",children:t.wifeBirthDate}),e.jsxs(g,{variant:"outline",className:"text-xs w-fit",children:[c(t.wifeBirthDate)," سنة"]})]})]}),t.wifeJob&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"المهنة"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-foreground break-words",children:t.wifeJob})]}),t.wifePregnant&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"حالة الحمل"}),e.jsx(g,{variant:t.wifePregnant?"destructive":"secondary",className:"text-xs w-fit",children:t.wifePregnant?"حامل":"غير حامل"})]})]})]}),oe&&e.jsxs(se,{className:"mb-4 sm:mb-6",children:[e.jsx(me,{children:e.jsxs(ce,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[e.jsx(ae,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"معلومات السكن"]})}),e.jsx(re,{className:"space-y-3 sm:space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"المسكن الأصلي"}),e.jsx("p",{className:"text-xs sm:text-sm text-foreground mt-1 break-words",children:(t==null?void 0:t.originalResidence)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"حالة السكن الحالي"}),e.jsx("div",{className:"mt-1",children:t!=null&&t.isAbroad?e.jsxs(g,{variant:"destructive",className:"text-xs w-fit",children:[e.jsx(st,{className:"h-3 w-3 ml-1"}),"مغترب بالخارج"]}):t!=null&&t.isDisplaced?e.jsxs(g,{variant:"destructive",className:"text-xs w-fit",children:[e.jsx(je,{className:"h-3 w-3 ml-1"}),"نازح"]}):e.jsxs(g,{variant:"secondary",className:"text-xs w-fit",children:[e.jsx(ae,{className:"h-3 w-3 ml-1"}),"مقيم"]})})]}),(t==null?void 0:t.isDisplaced)&&e.jsxs("div",{children:[e.jsx(R,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"موقع النزوح"}),e.jsx("p",{className:"text-xs sm:text-sm text-foreground mt-1 break-words",children:(t==null?void 0:t.displacedLocation)||"غير محدد"})]}),(t==null?void 0:t.isAbroad)&&e.jsxs("div",{children:[e.jsx(R,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"الموقع في الخارج"}),e.jsx("p",{className:"text-xs sm:text-sm text-foreground mt-1 break-words",children:(t==null?void 0:t.abroadLocation)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"أضرار الحرب 2023"}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mt-1",children:t!=null&&t.warDamage2023?e.jsxs(g,{variant:"destructive",className:"text-xs w-fit",children:[e.jsx(je,{className:"h-3 w-3 ml-1"}),"متضرر (",Ue(t==null?void 0:t.warDamageDescription),")"]}):e.jsxs(g,{variant:"secondary",className:"text-xs w-fit",children:[e.jsx(ae,{className:"h-3 w-3 ml-1"}),"غير متضرر"]})})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"الفرع"}),e.jsx("p",{className:"text-xs sm:text-sm text-foreground mt-1 break-words",children:O(t==null?void 0:t.branch)})]})]})})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-3 sm:mb-4 pb-2 border-b border-gray-300 flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),"الحالة العامة للأسرة"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-primary",children:ve||0}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي أفراد الأسرة  (محسوب)"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["محفوظ: ",ke]})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-secondary",children:Se||0}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الذكور (محسوب)"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["محفوظ: ",Ae]})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-pink-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-pink-600",children:Ce||0}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الإناث (محسوب)"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["محفوظ: ",Te]})]}),e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:i.length}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الأطفال (تحت 2 سنة)"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:t.socialStatus&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"الحالة الاجتماعية:"}),e.jsx(g,{variant:"outline",className:"bg-blue-100 text-blue-800 text-xs w-fit",children:G(t.socialStatus)})]})})]}),ie&&u&&u.length>0&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-3 sm:mb-4 pb-2 border-b border-gray-300 flex items-center",children:[e.jsx(Q,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),"أفراد الأسرة"]}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-background",children:[e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"الاسم الكامل"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"رقم الهوية"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"تاريخ الميلاد"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"العمر"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"الجنس"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"القرابة"}),e.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-right font-medium text-muted-foreground text-xs sm:text-sm",children:"إعاقة"})]})}),e.jsx("tbody",{children:u.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:r.fullName}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:r.memberID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:r.birthDate}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2",children:e.jsx(g,{variant:"outline",className:"text-xs",children:A(r.birthDate)})}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:V(r.gender)}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2 text-xs sm:text-sm",children:k(r.relationship)}),e.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-2",children:r.isDisabled?e.jsx(g,{variant:"destructive",className:"text-xs",children:"نعم"}):e.jsx(g,{variant:"secondary",className:"text-xs",children:"لا"})})]},r.id))})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:u.map(r=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-foreground text-sm",children:r.fullName}),r.isDisabled?e.jsx(g,{variant:"destructive",className:"text-xs",children:"معاق"}):e.jsx(g,{variant:"secondary",className:"text-xs",children:"سليم"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"رقم الهوية:"}),e.jsx("span",{className:"mr-1",children:r.memberID||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"الجنس:"}),e.jsx("span",{className:"mr-1",children:V(r.gender)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الميلاد:"}),e.jsx("span",{className:"mr-1",children:r.birthDate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"العمر:"}),e.jsx("span",{className:"mr-1",children:A(r.birthDate)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"القرابة:"}),e.jsx("span",{className:"mr-1",children:k(r.relationship)})]})]})]},r.id))})]}),t.adminNotes&&e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-foreground mb-3 sm:mb-4 pb-2 border-b border-gray-300 flex items-center",children:[e.jsx(tt,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),"ملاحظات إدارية"]}),e.jsx("div",{className:"bg-background p-3 sm:p-4 rounded-lg",children:e.jsx("p",{className:"text-sm sm:text-base text-gray-700 break-words",children:t.adminNotes})})]}),e.jsxs("div",{className:"mt-8 sm:mt-12 pt-6 sm:pt-8 border-t border-gray-300 text-center text-xs sm:text-sm text-muted-foreground print-only",children:[e.jsxs("p",{children:["تم إنشاء هذا التقرير بواسطة ",M.siteName||"نظام إدارة البيانات العائلية"]}),e.jsxs("p",{className:"mt-2",children:["تاريخ الطباعة: ",de()," | الوقت: ",Je()]}),e.jsxs("div",{className:"mt-6 sm:mt-8 flex flex-col sm:flex-row justify-between gap-4 sm:gap-0",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"border-t border-gray-400 pt-2 mt-6 sm:mt-8 w-24 sm:w-32 mx-auto",children:e.jsx("p",{className:"text-xs sm:text-sm",children:"توقيع المسؤول"})})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"border-t border-gray-400 pt-2 mt-6 sm:mt-8 w-24 sm:w-32 mx-auto",children:e.jsx("p",{className:"text-xs sm:text-sm",children:"ختم الإدارة"})})})]})]})]})})]})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ne,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"لم يتم العثور على بيانات الأسرة"})})]})}export{jt as default};
