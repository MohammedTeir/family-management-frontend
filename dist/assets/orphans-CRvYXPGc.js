import{v as L,j as e,x as m,I as i,S as Z,m as ee,n as se,p as te,q as k,B as n,A as K,E as G,G as a,F as re,t as ae,r as g,c as me,w as C,b as ie,C as j,d as y,U as B,K as le,e as ne,f as de,y as z,D as T,O as F}from"./index-BRVCUzIT.js";import{D as oe,a as ce,b as xe,c as he}from"./dialog-D51Jx8ed.js";import{a as U}from"./dropdown-menu-DdnnckdS.js";import{A as ue,a as pe,b as ge,c as Ne,d as be,e as fe,f as je,g as ye}from"./alert-dialog-D8hb8FtP.js";import{H as V}from"./header--JBEaVK1.js";import{P as De}from"./plus-B3M91HrX.js";import{P as Q,T as q}from"./trash-2-a2eIXDOS.js";import"./index-uwi08Yf3.js";const ve=G({orphanName:a().min(1,"اسم اليتيم مطلوب"),orphanBirthDate:a().min(1,"تاريخ ميلاد اليتيم مطلوب"),orphanID:a().regex(/^\d{9}$/,"رقم هوية اليتيم يجب أن يكون 9 أرقام").min(1,"رقم الهوية مطلوب"),guardianName:a().min(1,"اسم الوصي مطلوب"),guardianID:a().regex(/^\d{9}$/,"رقم هوية الوصي يجب أن يكون 9 أرقام").min(1,"رقم هوية الوصي مطلوب"),guardianBirthDate:a().min(1,"تاريخ ميلاد الوصي مطلوب"),fatherName:a().min(1,"اسم الاب مطلوب"),fatherID:a().regex(/^\d{9}$/,"رقم هوية الاب يجب أن يكون 9 أرقام").min(1,"رقم هوية الاب مطلوب"),martyrdomDate:a().min(1,"تاريخ الاستشهاد مطلوب"),martyrdomType:re(["war_2023","pre_2023_war","natural_death"],{errorMap:(l,N)=>l.code==="invalid_enum_value"?{message:"حالة الوفاة مطلوبة"}:{message:N.defaultError}}),bankAccountNumber:a().min(1,"رقم حساب البنك مطلوب"),accountHolderName:a().min(1,"اسم صاحب الحساب مطلوب"),currentAddress:a().min(1,"العنوان الحالي مطلوب"),originalAddress:a().min(1,"العنوان الاصلي مطلوب"),mobileNumber:a().regex(/^\d{10}$/,"رقم الجوال يجب أن يكون 10 أرقام").min(1,"رقم الجوال مطلوب"),backupMobileNumber:a().regex(/^\d{10}$/,"رقم الجوال الاحتياطي يجب أن يكون 10 أرقام").min(1,"رقم الجوال الاحتياطي مطلوب")});function we({initialData:l,onSubmit:N,onCancel:o,isLoading:d=!1,isEdit:c=!1}){const t=L({resolver:K(ve),defaultValues:{orphanName:"",orphanBirthDate:"",orphanID:"",guardianName:"",guardianID:"",guardianBirthDate:"",fatherName:"",fatherID:"",martyrdomDate:"",martyrdomType:"",bankAccountNumber:"",accountHolderName:"",currentAddress:"",originalAddress:"",mobileNumber:"",backupMobileNumber:"",...l}}),f=b=>{N(b)};return e.jsxs("form",{onSubmit:t.handleSubmit(f),className:"space-y-3 sm:space-y-4 lg:space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"orphanName",className:"text-sm sm:text-base font-medium",children:"اسم اليتيم *"}),e.jsx(i,{id:"orphanName",placeholder:"اسم اليتيم",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("orphanName")}),t.formState.errors.orphanName&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.orphanName.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"orphanID",className:"text-sm sm:text-base font-medium",children:"رقم هوية اليتيم *"}),e.jsx(i,{id:"orphanID",placeholder:"رقم هوية اليتيم",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("orphanID")}),t.formState.errors.orphanID&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.orphanID.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"orphanBirthDate",className:"text-sm sm:text-base font-medium",children:"تاريخ ميلاد اليتيم *"}),e.jsx(i,{id:"orphanBirthDate",type:"date",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("orphanBirthDate")}),t.formState.errors.orphanBirthDate&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.orphanBirthDate.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"guardianName",className:"text-sm sm:text-base font-medium",children:"اسم الوصي *"}),e.jsx(i,{id:"guardianName",placeholder:"اسم الوصي",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("guardianName")}),t.formState.errors.guardianName&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.guardianName.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"guardianID",className:"text-sm sm:text-base font-medium",children:"رقم هوية الوصي *"}),e.jsx(i,{id:"guardianID",placeholder:"رقم هوية الوصي",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("guardianID")}),t.formState.errors.guardianID&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.guardianID.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"guardianBirthDate",className:"text-sm sm:text-base font-medium",children:"تاريخ ميلاد الوصي *"}),e.jsx(i,{id:"guardianBirthDate",type:"date",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("guardianBirthDate")}),t.formState.errors.guardianBirthDate&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.guardianBirthDate.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"fatherName",className:"text-sm sm:text-base font-medium",children:"اسم الاب *"}),e.jsx(i,{id:"fatherName",placeholder:"اسم الاب",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("fatherName")}),t.formState.errors.fatherName&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.fatherName.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"fatherID",className:"text-sm sm:text-base font-medium",children:"رقم هوية الاب *"}),e.jsx(i,{id:"fatherID",placeholder:"رقم هوية الاب",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("fatherID")}),t.formState.errors.fatherID&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.fatherID.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"martyrdomDate",className:"text-sm sm:text-base font-medium",children:"تاريخ الاستشهاد *"}),e.jsx(i,{id:"martyrdomDate",type:"date",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("martyrdomDate")}),t.formState.errors.martyrdomDate&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.martyrdomDate.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"martyrdomType",className:"text-sm sm:text-base font-medium",children:"حالة الوفاة *"}),e.jsxs(Z,{value:["war_2023","pre_2023_war","natural_death"].includes(t.watch("martyrdomType")||"")?t.watch("martyrdomType"):"",onValueChange:b=>t.setValue("martyrdomType",b),children:[e.jsx(ee,{className:"h-10 sm:h-11 text-sm sm:text-base mt-1",children:e.jsx(se,{placeholder:"اختر حالة الوفاة"})}),e.jsxs(te,{children:[e.jsx(k,{value:"war_2023",className:"text-sm sm:text-base",children:"شهيد حرب ٢٠٢٣"}),e.jsx(k,{value:"pre_2023_war",className:"text-sm sm:text-base",children:"شهيد حرب ما قبل ذلك"}),e.jsx(k,{value:"natural_death",className:"text-sm sm:text-base",children:"وفاة طبيعية"})]})]}),t.formState.errors.martyrdomType&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.martyrdomType.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"bankAccountNumber",className:"text-sm sm:text-base font-medium",children:"رقم حساب البنك *"}),e.jsx(i,{id:"bankAccountNumber",placeholder:"رقم حساب البنك",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("bankAccountNumber")}),t.formState.errors.bankAccountNumber&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.bankAccountNumber.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"accountHolderName",className:"text-sm sm:text-base font-medium",children:"اسم صاحب الحساب *"}),e.jsx(i,{id:"accountHolderName",placeholder:"اسم صاحب الحساب",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("accountHolderName")}),t.formState.errors.accountHolderName&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.accountHolderName.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"mobileNumber",className:"text-sm sm:text-base font-medium",children:"رقم الجوال *"}),e.jsx(i,{id:"mobileNumber",placeholder:"رقم الجوال",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("mobileNumber")}),t.formState.errors.mobileNumber&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.mobileNumber.message})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"backupMobileNumber",className:"text-sm sm:text-base font-medium",children:"رقم جوال احتياطي *"}),e.jsx(i,{id:"backupMobileNumber",placeholder:"رقم جوال احتياطي",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("backupMobileNumber")}),t.formState.errors.backupMobileNumber&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.backupMobileNumber.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(m,{htmlFor:"currentAddress",className:"text-sm sm:text-base font-medium",children:"العنوان الحالي *"}),e.jsx(i,{id:"currentAddress",placeholder:"العنوان الحالي",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("currentAddress")}),t.formState.errors.currentAddress&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.currentAddress.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(m,{htmlFor:"originalAddress",className:"text-sm sm:text-base font-medium",children:"العنوان الاصلي *"}),e.jsx(i,{id:"originalAddress",placeholder:"العنوان الاصلي",className:"h-10 sm:h-11 text-sm sm:text-base mt-1",...t.register("originalAddress")}),t.formState.errors.originalAddress&&e.jsx("p",{className:"text-xs sm:text-sm text-destructive mt-1",children:t.formState.errors.originalAddress.message})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 sm:space-x-reverse pt-4 sm:pt-6",children:[e.jsx(n,{type:"button",variant:"outline",onClick:o,className:"w-full sm:w-auto px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base order-2 sm:order-1",children:"إلغاء"}),e.jsx(n,{type:"submit",disabled:d,className:"w-full sm:w-auto px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base order-1 sm:order-2",children:d?"جاري الحفظ...":c?"تحديث":"إضافة"})]})]})}const Se=G({orphanName:a().min(1,"اسم اليتيم مطلوب"),orphanBirthDate:a().min(1,"تاريخ ميلاد اليتيم مطلوب"),orphanID:a().regex(/^\d{9,15}$/,"رقم هوية اليتيم يجب أن يكون 9-15 رقم").optional(),guardianName:a().min(1,"اسم الوصي مطلوب"),guardianID:a().regex(/^\d{9,15}$/,"رقم هوية الوصي يجب أن يكون 9-15 رقم").optional(),guardianBirthDate:a().min(1,"تاريخ ميلاد الوصي مطلوب"),fatherName:a().optional(),fatherID:a().regex(/^\d{9,15}$/,"رقم هوية الأب يجب أن يكون 9-15 رقم").optional(),martyrdomDate:a().optional(),bankAccountNumber:a().optional(),accountHolderName:a().optional(),currentAddress:a().optional(),originalAddress:a().optional(),mobileNumber:a().regex(/^[\d\s+\-().]{10,15}$/,"رقم الجوال غير صحيح").optional(),backupMobileNumber:a().regex(/^[\d\s+\-().]{10,15}$/,"رقم الجوال الاحتياطي غير صحيح").optional()});function Oe(){const{toast:l}=ae(),[N,o]=g.useState(!1),[d,c]=g.useState(null),[t,f]=g.useState(null),[b,D]=g.useState(!1),[x,v]=g.useState(1),w=10,{data:S,isLoading:J}=me({queryKey:["/api/family"]}),p=(S==null?void 0:S.orphans)||[],R=p.length,A=L({resolver:K(Se),defaultValues:{orphanName:"",orphanBirthDate:"",orphanID:"",guardianName:"",guardianID:"",guardianBirthDate:"",fatherName:"",fatherID:"",martyrdomDate:"",bankAccountNumber:"",accountHolderName:"",currentAddress:"",originalAddress:"",mobileNumber:"",backupMobileNumber:""}}),W=s=>{o(s),s||(c(null),A.reset({orphanName:"",orphanBirthDate:"",orphanID:"",guardianName:"",guardianID:"",guardianBirthDate:"",fatherName:"",fatherID:"",martyrdomDate:"",bankAccountNumber:"",accountHolderName:"",currentAddress:"",originalAddress:"",mobileNumber:"",backupMobileNumber:""}))},_=C({mutationFn:async s=>(await F.post("/api/orphans",s)).data,onSuccess:s=>{T.setQueryData(["/api/family"],r=>r&&r.orphans?{...r,orphans:[...r.orphans,s]}:r&&{...r,orphans:[s]}),l({title:"تم الإضافة بنجاح",description:"تم إضافة اليتيم إلى الأسرة",variant:"default"}),o(!1),c(null)},onError:s=>{l({title:"خطأ في الإضافة",description:s.message,variant:"destructive"})}}),O=C({mutationFn:async({id:s,data:r})=>{console.log("Updating orphan with ID:",s,"Data:",r);const u=await F.put(`/api/orphans/${s}`,r);return console.log("Update response status:",u.status),u.data},onSuccess:s=>{T.setQueryData(["/api/family"],r=>r&&r.orphans?{...r,orphans:r.orphans.map(u=>u.id===s.id?s:u)}:r),l({title:"تم التحديث بنجاح",description:"تم تحديث بيانات اليتيم",variant:"default"}),o(!1),c(null)},onError:s=>{console.error("Update mutation error:",s),l({title:"خطأ في التحديث",description:s.message,variant:"destructive"})}}),I=C({mutationFn:async s=>{console.log("Attempting to delete orphan with ID:",s),console.log("Orphan ID type in mutation:",typeof s);const r=await F.delete(`/api/orphans/${s}`);return console.log("Delete response status:",r.status),s},onSuccess:s=>{T.setQueryData(["/api/family"],r=>r&&r.orphans?{...r,orphans:r.orphans.filter(u=>u.id!==s)}:r),l({title:"تم الحذف بنجاح",description:"تم حذف اليتيم من الأسرة",variant:"default"}),D(!1),f(null)},onError:s=>{console.error("Delete mutation error:",s),l({title:"خطأ في الحذف",description:s.message,variant:"destructive"})}}),X=s=>{console.log("Form submitted with data:",s),d?(console.log("Updating existing orphan:",d.id),O.mutate({id:d.id,data:s})):(console.log("Creating new orphan"),_.mutate(s))},M=s=>{console.log("Editing orphan:",s);const r={id:s.id,orphanName:s.orphanName||"",orphanBirthDate:s.orphanBirthDate||"",orphanID:s.orphanID||"",guardianName:s.guardianName||"",guardianID:s.guardianID||"",guardianBirthDate:s.guardianBirthDate||"",fatherName:s.fatherName||"",fatherID:s.fatherID||"",martyrdomDate:s.martyrdomDate||"",martyrdomType:s.martyrdomType||"",bankAccountNumber:s.bankAccountNumber||"",accountHolderName:s.accountHolderName||"",currentAddress:s.currentAddress||"",originalAddress:s.originalAddress||"",mobileNumber:s.mobileNumber||"",backupMobileNumber:s.backupMobileNumber||""};c(r),A.reset(r),o(!0)},H=()=>{c(null),A.reset({orphanName:"",orphanBirthDate:"",orphanID:"",guardianName:"",guardianID:"",guardianBirthDate:"",fatherName:"",fatherID:"",martyrdomDate:"",martyrdomType:"",bankAccountNumber:"",accountHolderName:"",currentAddress:"",originalAddress:"",mobileNumber:"",backupMobileNumber:""}),o(!0)},E=s=>{console.log("Delete clicked for orphan:",s),console.log("Orphan ID:",s.id),console.log("Orphan ID type:",typeof s.id),console.log("Orphan ID Number:",Number(s.id)),console.log("Orphan ID String:",String(s.id)),console.log("Full orphan object:",JSON.stringify(s,null,2)),f(s),D(!0)},Y=()=>{if(t){console.log("Confirming delete for orphan:",t),console.log("Delete orphan ID:",t.id),console.log("Delete orphan ID type:",typeof t.id);const s=Number(t.id);if(console.log("Converted orphan ID:",s),isNaN(s)){l({title:"خطأ في المعرف",description:"معرف اليتيم غير صحيح",variant:"destructive"});return}I.mutate(s)}},$=Math.ceil(p.length/w),P=p.slice((x-1)*w,x*w),{settings:h}=ie();return g.useEffect(()=>{h.siteTitle&&(document.title=h.siteTitle),h.language&&(document.documentElement.lang=h.language,document.body.dir=h.language==="ar"?"rtl":"ltr")},[h.siteTitle,h.language]),J?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(V,{}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-muted-foreground",children:"جاري تحميل البيانات..."})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(V,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"اليتامى"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"إدارة بيانات اليتامى"})]}),e.jsxs(n,{onClick:H,className:"flex items-center gap-2 w-full sm:w-auto justify-center",children:[e.jsx(De,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm sm:text-base",children:"إضافة يتيم جديد"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[e.jsx(j,{children:e.jsx(y,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"إجمالي اليتامى"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:R})]})]})})}),e.jsx(j,{children:e.jsx(y,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600"})}),e.jsxs("div",{className:"mr-3 sm:mr-4",children:[e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"عدد الأيتام أقل من 18 سنة"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:p.filter(s=>le(s.orphanBirthDate)<18).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"من الأيتام"})]})]})})})]}),e.jsxs(j,{children:[e.jsx(ne,{children:e.jsxs(de,{className:"text-lg sm:text-xl",children:["قائمة اليتامى (",p.length," فرد)"]})}),e.jsx(y,{children:p.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block sm:hidden space-y-4",children:P.map(s=>e.jsx(j,{className:"border border-gray-200",children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base",children:s.orphanName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["رقم الهوية: ",s.orphanID||"غير محدد"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>M(s),className:"p-2",children:e.jsx(Q,{className:"h-3 w-3"})}),e.jsx(n,{variant:"destructive",size:"sm",onClick:()=>E(s),className:"p-2",children:e.jsx(q,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاريخ الميلاد:"}),e.jsx("p",{className:"font-medium",children:s.orphanBirthDate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"العمر:"}),e.jsx(U,{variant:"outline",className:"text-xs",children:z(s.orphanBirthDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"حالة الوفاة:"}),e.jsxs("p",{className:"font-medium",children:[s.martyrdomType==="war_2023"&&"شهيد حرب ٢٠٢٣",s.martyrdomType==="pre_2023_war"&&"شهيد حرب ما قبل ذلك",s.martyrdomType==="natural_death"&&"وفاة طبيعية",!s.martyrdomType&&"غير محدد"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"اسم الوصي:"}),e.jsx("p",{className:"font-medium",children:s.guardianName})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"رقم الجوال:"}),e.jsx("p",{className:"font-medium",children:s.mobileNumber||"غير محدد"})]})]})]})})},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-background",children:[e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"اسم اليتيم"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم الهوية"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"تاريخ الميلاد"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"العمر"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"حالة الوفاة"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"اسم الوصي"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"رقم الجوال"}),e.jsx("th",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-right font-medium text-muted-foreground text-sm",children:"الإجراءات"})]})}),e.jsx("tbody",{children:P.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.orphanName}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.orphanID||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.orphanBirthDate}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2",children:e.jsx(U,{variant:"outline",className:"text-xs",children:z(s.orphanBirthDate)})}),e.jsxs("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:[s.martyrdomType==="war_2023"&&"شهيد حرب ٢٠٢٣",s.martyrdomType==="pre_2023_war"&&"شهيد حرب ما قبل ذلك",s.martyrdomType==="natural_death"&&"وفاة طبيعية",!s.martyrdomType&&"غير محدد"]}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.guardianName}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2 text-sm",children:s.mobileNumber||"غير محدد"}),e.jsx("td",{className:"border border-gray-300 px-3 sm:px-4 py-2",children:e.jsxs("div",{className:"flex space-x-1 sm:space-x-2 space-x-reverse",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>M(s),className:"p-1.5 sm:p-2",children:e.jsx(Q,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsx(n,{variant:"destructive",size:"sm",onClick:()=>E(s),className:"p-1.5 sm:p-2",children:e.jsx(q,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 mt-4",children:[e.jsx(n,{variant:"outline",size:"sm",disabled:x===1,onClick:()=>v(x-1),className:"text-sm",children:"السابق"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from({length:$},(s,r)=>r+1).map(s=>e.jsx(n,{variant:s===x?"default":"outline",size:"sm",onClick:()=>v(s),className:"text-sm min-w-[32px] h-8",children:s},s))}),e.jsx(n,{variant:"outline",size:"sm",disabled:x===$,onClick:()=>v(x+1),className:"text-sm",children:"التالي"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(B,{className:"h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"لا توجد أيتام مسجلين"}),e.jsx(n,{onClick:H,className:"mt-4 w-full sm:w-auto",children:"إضافة يتيم جديد"})]})})]}),e.jsx(oe,{open:N,onOpenChange:W,children:e.jsxs(ce,{className:"w-[95vw] max-w-2xl max-h-[90vh] overflow-y-auto sm:w-full",children:[e.jsx(xe,{className:"px-4 sm:px-6",children:e.jsx(he,{className:"text-lg sm:text-xl font-bold text-center",children:d?"تعديل بيانات اليتيم":"إضافة يتيم جديد"})}),e.jsx("div",{className:"px-4 sm:px-6 py-4",children:e.jsx(we,{initialData:d,onSubmit:X,onCancel:()=>{o(!1),c(null)},isLoading:_.isPending||O.isPending,isEdit:!!d})})]})}),e.jsx(ue,{open:b,onOpenChange:D,children:e.jsxs(pe,{className:"w-[95vw] max-w-md mx-auto sm:w-full",children:[e.jsxs(ge,{className:"px-4 sm:px-6",children:[e.jsx(Ne,{className:"text-lg sm:text-xl font-bold text-center",children:"تأكيد الحذف"}),e.jsxs(be,{className:"text-right text-sm sm:text-base",children:['هل أنت متأكد من حذف اليتيم "',t==null?void 0:t.orphanName,'"؟',e.jsx("br",{}),"لا يمكن التراجع عن هذا الإجراء."]})]}),e.jsxs(fe,{className:"flex flex-col sm:flex-row justify-center gap-2 px-4 sm:px-6 pb-4 sm:pb-6",children:[e.jsx(je,{className:"w-full sm:w-auto",children:"إلغاء"}),e.jsx(ye,{onClick:Y,className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:I.isPending,children:I.isPending?"جاري الحذف...":"حذف"})]})]})})]})]})}export{Oe as default};
