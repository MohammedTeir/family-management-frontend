import{a as Me,t as Te,ab as $e,b as Ae,r as o,c as Z,aa as Pe,w as V,j as e,B as j,x as i,I as R,S as u,m as x,n as h,p as g,q as t,e as Ve,f as Re,l as qe,d as Le,O as v}from"./index-ZYzdAsGm.js";import{T as Ee}from"./textarea-DdMCguNq.js";import{D as ae,d as Ke,a as te,b as le,c as ne,e as oe,f as ie}from"./dialog-S7UO55CL.js";import{U as Oe,a as q}from"./dropdown-menu-C5FzIU9D.js";import{P as Qe}from"./page-wrapper-DEQQYva8.js";import{P as Ue}from"./plus-hSYWIs9K.js";import{M as Be}from"./map-pin-BVNRh1gA.js";import{C as _e}from"./calendar-days-baJscIMj.js";import{f as ze,a as We}from"./ar-DxfRqTnb.js";import"./index-CvI2JamZ.js";import"./baby-B20HtjzY.js";import"./file-text-WTwHpCUH.js";const K=[{value:"food_basket",label:"Ø³Ù„Ø© ØºØ°Ø§Ø¦ÙŠØ©",color:"bg-orange-500",icon:"ğŸ"},{value:"cash_support",label:"Ø¯Ø¹Ù… Ù†Ù‚Ø¯ÙŠ",color:"bg-green-500",icon:"ğŸ’°"},{value:"school_kit",label:"Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ù…Ø¯Ø±Ø³ÙŠØ©",color:"bg-blue-500",icon:"ğŸ“š"},{value:"medical",label:"Ø¯Ø¹Ù… Ø·Ø¨ÙŠ",color:"bg-red-500",icon:"ğŸ¥"},{value:"clothing",label:"Ù…Ù„Ø§Ø¨Ø³",color:"bg-purple-500",icon:"ğŸ‘•"},{value:"other",label:"Ø£Ø®Ø±Ù‰",color:"bg-background0",icon:"ğŸ“¦"}];function ds(){const[He,ee]=Me(),{toast:m}=Te(),k=$e(),{settings:N}=Ae();o.useEffect(()=>{N.siteTitle&&(document.title=N.siteTitle),N.language&&(document.documentElement.lang=N.language,document.body.dir=N.language==="ar"?"rtl":"ltr")},[N.siteTitle,N.language]);const[de,O]=o.useState(!1),[ce,Q]=o.useState(!1),[se,Ye]=o.useState(null),[b,I]=o.useState([]),[M,me]=o.useState(""),[T,ue]=o.useState("all"),[U,xe]=o.useState("all"),[B,he]=o.useState("all"),[_,ge]=o.useState("all"),[z,pe]=o.useState("all"),[L,be]=o.useState("all"),[$,fe]=o.useState("all"),[W,je]=o.useState("all"),[w,ve]=o.useState("all"),[H,Ne]=o.useState(""),[Y,we]=o.useState(""),[p,A]=o.useState({title:"",description:"",supportType:"",location:""}),{data:S,isLoading:ye}=Z({queryKey:["support-vouchers"],queryFn:async()=>(await v.get("/api/support-vouchers")).data}),{data:F}=Z({queryKey:["/api/admin/families"],queryFn:async()=>(await v.get("/api/admin/families")).data}),{data:P}=Z({queryKey:["/api/admin/users"],queryFn:async()=>(await v.get("/api/admin/users")).data}),G=s=>{if(!s)return 0;const l=new Date,n=new Date(s);let c=l.getFullYear()-n.getFullYear();const a=l.getMonth()-n.getMonth();return(a<0||a===0&&l.getDate()<n.getDate())&&c--,c},y=Pe.useMemo(()=>{if(!F||!P)return[];console.log("Debug - Families:",F),console.log("Debug - Users:",P);const s=F.map(a=>{var D;const r=P.find(d=>d.id===a.userId),C=((D=a.members)==null?void 0:D.filter(d=>d.birthDate?G(d.birthDate)<2:!1))||[],f={id:a.id,type:"family",name:a.husbandName,username:(r==null?void 0:r.username)||"",phone:a.primaryPhone,members:a.totalMembers,role:(r==null?void 0:r.role)||"unknown",userId:a.userId,husbandID:a.husbandID,wifeID:a.wifeID||"",branch:a.branch,isDisplaced:a.isDisplaced,displacedLocation:a.displacedLocation,isAbroad:a.isAbroad,warDamage2023:a.warDamage2023,socialStatus:a.socialStatus,numMales:a.numMales,numFemales:a.numFemales,wifePregnant:a.wifePregnant||!1,childrenCount:C.length,hasChildren:C.length>0};return(r==null?void 0:r.role)==="admin"&&/^\d+$/.test(r.username)&&console.log("Debug - Found admin with numeric username:",{username:r.username,role:r.role,socialStatus:a.socialStatus,recipient:f}),f}),l=P.filter(a=>!F.some(r=>r.userId===a.id)).map(a=>{var f,D;const r=F.find(d=>d.userId===a.id),C={id:`user-${a.id}`,type:"user",name:a.username,username:a.username,phone:a.phone||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",members:r?r.totalMembers:0,role:a.role,userId:a.id,husbandID:(r==null?void 0:r.husbandID)||null,wifeID:(r==null?void 0:r.wifeID)||null,branch:(r==null?void 0:r.branch)||null,isDisplaced:(r==null?void 0:r.isDisplaced)||!1,displacedLocation:(r==null?void 0:r.displacedLocation)||null,isAbroad:(r==null?void 0:r.isAbroad)||!1,warDamage2023:(r==null?void 0:r.warDamage2023)||!1,socialStatus:(r==null?void 0:r.socialStatus)||null,numMales:(r==null?void 0:r.numMales)||0,numFemales:(r==null?void 0:r.numFemales)||0,wifePregnant:(r==null?void 0:r.wifePregnant)||!1,childrenCount:r&&((f=r.members)==null?void 0:f.filter(d=>d.birthDate?G(d.birthDate)<2:!1).length)||0,hasChildren:r?(((D=r.members)==null?void 0:D.filter(d=>d.birthDate?G(d.birthDate)<2:!1).length)||0)>0:!1};return a.role==="admin"&&/^\d+$/.test(a.username)&&console.log("Debug - Found admin with numeric username (no family):",{username:a.username,role:a.role,socialStatus:r==null?void 0:r.socialStatus,recipient:C}),C}),n=[...s,...l];console.log("Debug - All recipients:",n);const c=n.filter(a=>a.role==="admin"&&/^\d+$/.test(a.username));return console.log("Debug - Admin users with numeric usernames in allRecipients:",c),n},[F,P]).filter(s=>{const l=s.name.toLowerCase().includes(M.toLowerCase())||s.phone.includes(M)||s.husbandID&&s.husbandID.includes(M)||s.wifeID&&s.wifeID.includes(M),n=T==="all"||T==="head"&&(s.role==="head"||s.role==="admin"&&/^\d+$/.test(s.username))||T==="root"&&s.role==="root",c=U==="all"||s.branch===U,a=B==="all"||(B==="yes"?s.isDisplaced:!s.isDisplaced),r=_==="all"||(_==="yes"?s.isAbroad:!s.isAbroad),C=z==="all"||(z==="yes"?s.warDamage2023:!s.warDamage2023),f=L==="all"||s.socialStatus===L,D=$==="all"||$==="small"&&s.members<=3||$==="medium"&&s.members>3&&s.members<=6||$==="large"&&s.members>6,d=W==="all"||(W==="yes"?s.wifePregnant:!s.wifePregnant),E=w==="all"||(w==="yes"?s.hasChildren:!s.hasChildren)||w==="many"&&s.childrenCount>=3||w==="few"&&s.childrenCount>0&&s.childrenCount<3||w==="custom"&&(H===""||s.childrenCount>=parseInt(H))&&(Y===""||s.childrenCount<=parseInt(Y)),re=l&&n&&c&&a&&r&&C&&f&&D&&d&&E;return s.role==="admin"&&/^\d+$/.test(s.username)&&console.log("Debug - Filtering admin with numeric username:",{username:s.username,role:s.role,socialStatus:s.socialStatus,roleFilter:T,socialStatusFilter:L,matchesRole:n,matchesSocialStatus:f,allMatches:re,recipient:s,type:s.type,id:s.id}),re}),Ce=y.filter(s=>s.role==="admin"&&/^\d+$/.test(s.username));console.log("Debug - Admin users with numeric usernames in filteredRecipients:",Ce),console.log("Debug - Total filtered recipients:",y.length);const De=y.find(s=>s.username==="410302772");console.log("Debug - Specific user 410302772 in filteredRecipients:",De);const Se=()=>{const s=y.map(l=>l.id);I(s)},Fe=()=>{I([])},J=V({mutationFn:async s=>(await v.post("/api/support-vouchers",s)).data,onSuccess:()=>{k.invalidateQueries({queryKey:["support-vouchers"]}),O(!1),A({title:"",description:"",supportType:"",location:""}),m({title:"ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø© Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¨ÙˆÙ†Ø© Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"})},onError:s=>{m({title:"Ø®Ø·Ø£",description:s.message,variant:"destructive"})}}),X=V({mutationFn:async({voucherId:s,familyIds:l})=>(await v.post(`/api/support-vouchers/${s}/recipients`,{familyIds:l})).data,onSuccess:()=>{k.invalidateQueries({queryKey:["support-vouchers"]}),Q(!1),I([]),m({title:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©"})},onError:s=>{m({title:"Ø®Ø·Ø£",description:s.message,variant:"destructive"})}});V({mutationFn:async({recipientId:s,status:l})=>(await v.patch(`/api/voucher-recipients/${s}`,{status:l})).data,onSuccess:()=>{k.invalidateQueries({queryKey:["support-vouchers"]}),m({title:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙÙŠØ¯"})},onError:s=>{m({title:"Ø®Ø·Ø£",description:s.message,variant:"destructive"})}}),V({mutationFn:async({voucherId:s,recipientIds:l})=>(await v.post(`/api/support-vouchers/${s}/notify`,{recipientIds:l})).data,onSuccess:()=>{k.invalidateQueries({queryKey:["support-vouchers"]}),m({title:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†"})},onError:s=>{m({title:"Ø®Ø·Ø£",description:s.message,variant:"destructive"})}}),V({mutationFn:async({voucherId:s,isActive:l})=>(await v.patch(`/api/support-vouchers/${s}`,{isActive:l})).data,onSuccess:()=>{k.invalidateQueries({queryKey:["support-vouchers"]}),m({title:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø© Ø¨Ù†Ø¬Ø§Ø­",description:"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©"})},onError:s=>{m({title:"Ø®Ø·Ø£",description:s.message,variant:"destructive"})}});const ke=()=>{J.mutate(p)},Ie=()=>{se&&b.length>0&&X.mutate({voucherId:se.id,familyIds:b})};return ye?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("div",{className:"text-lg text-muted-foreground",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª..."})]})})})}):e.jsx(Qe,{children:e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6 sm:space-y-8",children:[e.jsx("div",{className:"bg-card rounded-xl sm:rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8 border border-border",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground",children:"Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-muted-foreground",children:"Ø¥Ø¯Ø§Ø±Ø© ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†"}),e.jsx("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-green-500 rounded-full"}),e.jsxs("span",{children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª: ",(S==null?void 0:S.length)||0]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto items-stretch sm:items-end",children:[e.jsx(j,{variant:"outline",className:"border-border text-foreground hover:bg-muted text-sm sm:text-base w-full sm:w-auto",onClick:()=>ee("/admin"),children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…"}),e.jsxs(ae,{open:de,onOpenChange:O,children:[e.jsx(Ke,{asChild:!0,children:e.jsxs(j,{className:"bg-primary hover:bg-primary/90 text-primary-foreground px-4 sm:px-6 lg:px-8 py-2 sm:py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 text-sm sm:text-base w-full sm:w-auto",children:[e.jsx(Ue,{className:"ml-2 h-4 w-4 sm:h-5 sm:w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ†Ø© Ø¬Ø¯ÙŠØ¯"}),e.jsx("span",{className:"sm:hidden",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ†Ø©"})]})}),e.jsxs(te,{className:"max-w-[95vw] sm:max-w-[425px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsx(ne,{className:"text-xl sm:text-2xl font-bold text-foreground",children:"Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ†Ø© Ø¯Ø¹Ù… Ø¬Ø¯ÙŠØ¯"}),e.jsx(oe,{className:"text-sm sm:text-base text-muted-foreground",children:"Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ ÙƒÙˆØ¨ÙˆÙ†Ø© Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"title",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©"}),e.jsx(R,{id:"title",value:p.title,onChange:s=>A({...p,title:s.target.value}),placeholder:"Ù…Ø«Ø§Ù„: ÙƒÙˆØ¨ÙˆÙ†Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„ØºØ°Ø§Ø¦ÙŠ",className:"border-border focus:border-primary focus:ring-primary text-sm sm:text-base"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"description",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx(Ee,{id:"description",value:p.description,onChange:s=>A({...p,description:s.target.value}),placeholder:"ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù† Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©",className:"border-border focus:border-primary focus:ring-primary text-sm sm:text-base"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"supportType",className:"text-sm sm:text-base text-foreground font-medium",children:"Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø¹Ù…"}),e.jsxs(u,{value:p.supportType,onValueChange:s=>A({...p,supportType:s}),children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{placeholder:"Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø¹Ù…"})}),e.jsx(g,{children:K.map(s=>e.jsxs(t,{value:s.value,className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.label})]},s.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"location",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx(R,{id:"location",value:p.location,onChange:s=>A({...p,location:s.target.value}),placeholder:"Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙˆØ²ÙŠØ¹",className:"border-border focus:border-primary focus:ring-primary text-sm sm:text-base"})]})]}),e.jsxs(ie,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(j,{variant:"outline",onClick:()=>O(!1),className:"border-border text-foreground hover:bg-muted w-full sm:w-auto order-2 sm:order-1",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(j,{onClick:ke,disabled:J.isPending,className:"bg-primary hover:bg-primary/90 text-primary-foreground w-full sm:w-auto order-1 sm:order-2",children:J.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡...":"Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©"})]})]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:S==null?void 0:S.map(s=>{var l,n,c;return e.jsxs("div",{className:"bg-card rounded-xl sm:rounded-2xl shadow-lg border border-border overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>ee(`/admin/support-vouchers/${s.id}`),children:[e.jsxs(Ve,{className:"bg-gradient-to-r from-muted to-primary/5 border-b border-border p-4 sm:p-6",children:[e.jsxs(Re,{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground flex items-center gap-2 sm:gap-3",children:[e.jsx("span",{className:`text-xl sm:text-2xl lg:text-3xl ${(l=K.find(a=>a.value===s.supportType))==null?void 0:l.color}`,children:(n=K.find(a=>a.value===s.supportType))==null?void 0:n.icon}),e.jsx("span",{className:"truncate",children:s.title})]}),e.jsx(qe,{className:"text-muted-foreground mt-2 text-sm sm:text-base line-clamp-2",children:s.description})]}),e.jsxs(Le,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 lg:gap-4 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-green-500 rounded-full flex-shrink-0"}),e.jsx("span",{className:"truncate",children:(c=K.find(a=>a.value===s.supportType))==null?void 0:c.label})]}),s.location&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(Be,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(Oe,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.creator.username})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(_e,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:ze(new Date(s.createdAt),"dd/MM/yyyy",{locale:We})})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 grid grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground",children:s.recipients.length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†"})]}),e.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground",children:s.recipients.filter(a=>a.status==="received").length}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"})]})]}),e.jsx("div",{className:"mt-3 sm:mt-4 flex justify-center",children:e.jsx(q,{variant:s.isActive?"default":"secondary",className:"text-xs sm:text-sm",children:s.isActive?"Ù†Ø´Ø·":"ØºÙŠØ± Ù†Ø´Ø·"})})]})]},s.id)})}),e.jsx(ae,{open:ce,onOpenChange:Q,children:e.jsxs(te,{className:"max-w-[95vw] sm:max-w-[600px] lg:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(le,{children:[e.jsx(ne,{className:"text-lg sm:text-xl lg:text-2xl font-bold text-foreground",children:"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©"}),e.jsx(oe,{className:"text-sm sm:text-base text-muted-foreground",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª Ø§Ù„ØªÙŠ Ø³ØªØ³ØªÙÙŠØ¯ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø©"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"search",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø§Ù„Ø¨Ø­Ø«"}),e.jsx(R,{id:"search",value:M,onChange:s=>me(s.target.value),placeholder:"Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ù‡Ø§ØªÙ...",className:"border-border focus:border-primary focus:ring-primary text-sm sm:text-base"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"role",className:"text-sm sm:text-base text-foreground font-medium",children:"Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsxs(u,{value:T,onValueChange:ue,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx(t,{value:"head",children:"Ø±Ø¨ Ø§Ù„Ø£Ø³Ø±Ø©"}),e.jsx(t,{value:"root",children:"Ù…Ø´Ø±Ù Ø±Ø¦ÙŠØ³ÙŠ"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"branch",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø§Ù„ÙØ±Ø¹"}),e.jsxs(u,{value:U,onValueChange:xe,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±ÙˆØ¹"}),e.jsx(t,{value:"gaza",children:"ØºØ²Ø©"}),e.jsx(t,{value:"north",children:"Ø´Ù…Ø§Ù„ ØºØ²Ø©"}),e.jsx(t,{value:"central",children:"Ø§Ù„ÙˆØ³Ø·Ù‰"}),e.jsx(t,{value:"khan_yunis",children:"Ø®Ø§Ù† ÙŠÙˆÙ†Ø³"}),e.jsx(t,{value:"rafah",children:"Ø±ÙØ­"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"displaced",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø²ÙˆØ­"}),e.jsxs(u,{value:B,onValueChange:he,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª"}),e.jsx(t,{value:"yes",children:"Ù†Ø§Ø²Ø­ÙŠÙ†"}),e.jsx(t,{value:"no",children:"ØºÙŠØ± Ù†Ø§Ø²Ø­ÙŠÙ†"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"abroad",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø§Ù„Ø§ØºØªØ±Ø§Ø¨"}),e.jsxs(u,{value:_,onValueChange:ge,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª"}),e.jsx(t,{value:"yes",children:"Ù…ØºØªØ±Ø¨ÙŠÙ† Ø¨Ø§Ù„Ø®Ø§Ø±Ø¬"}),e.jsx(t,{value:"no",children:"Ù…Ù‚ÙŠÙ…ÙŠÙ†"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"damaged",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø£Ø¶Ø±Ø§Ø± Ø§Ù„Ø­Ø±Ø¨"}),e.jsxs(u,{value:z,onValueChange:pe,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø§Øª"}),e.jsx(t,{value:"yes",children:"Ù…ØªØ¶Ø±Ø±ÙŠÙ†"}),e.jsx(t,{value:"no",children:"ØºÙŠØ± Ù…ØªØ¶Ø±Ø±ÙŠÙ†"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"socialStatus",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©"}),e.jsxs(u,{value:L,onValueChange:be,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx(t,{value:"married",children:"Ù…ØªØ²ÙˆØ¬"}),e.jsx(t,{value:"polygamous",children:"Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ¬Ø§Øª"}),e.jsx(t,{value:"divorced",children:"Ù…Ø·Ù„Ù‚"}),e.jsx(t,{value:"widowed",children:"Ø£Ø±Ù…Ù„Ø©"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"members",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙØ±Ø§Ø¯"}),e.jsxs(u,{value:$,onValueChange:fe,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø­Ø¬Ø§Ù…"}),e.jsx(t,{value:"small",children:"ØµØºÙŠØ±Ø© (1-3)"}),e.jsx(t,{value:"medium",children:"Ù…ØªÙˆØ³Ø·Ø© (4-6)"}),e.jsx(t,{value:"large",children:"ÙƒØ¨ÙŠØ±Ø© (7+)"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"pregnant",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø£Ù… ÙÙŠ Ø§Ù„Ø­Ù…Ù„"}),e.jsxs(u,{value:W,onValueChange:je,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx(t,{value:"yes",children:"Ù†Ø¹Ù…"}),e.jsx(t,{value:"no",children:"Ù„Ø§"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"children",className:"text-sm sm:text-base text-foreground font-medium",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø·ÙØ§Ù„"}),e.jsxs(u,{value:w,onValueChange:ve,children:[e.jsx(x,{className:"border-border focus:border-primary focus:ring-primary",children:e.jsx(h,{})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª"}),e.jsx(t,{value:"yes",children:"Ù†Ø¹Ù…"}),e.jsx(t,{value:"no",children:"Ù„Ø§"}),e.jsx(t,{value:"many",children:"ÙƒØ«ÙŠØ± (3+)"}),e.jsx(t,{value:"few",children:"Ù‚Ù„ÙŠÙ„ (1-2)"}),e.jsx(t,{value:"custom",children:"Ù…Ø®ØµØµ"})]})]}),w==="custom"&&e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"childrenMin",className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰"}),e.jsx(R,{id:"childrenMin",type:"number",min:"0",value:H,onChange:s=>Ne(s.target.value),placeholder:"0",className:"text-xs border-border focus:border-primary focus:ring-primary"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"childrenMax",className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰"}),e.jsx(R,{id:"childrenMax",type:"number",min:"0",value:Y,onChange:s=>we(s.target.value),placeholder:"10",className:"text-xs border-border focus:border-primary focus:ring-primary"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{variant:"outline",size:"sm",onClick:Se,className:"border-primary text-primary hover:bg-primary/10 hover:border-primary/30 hover:text-primary/80 transition-all duration-200 text-xs sm:text-sm",children:"ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„"}),e.jsx(j,{variant:"outline",size:"sm",onClick:Fe,className:"border-border text-foreground hover:bg-background hover:border-border hover:text-foreground transition-all duration-200 text-xs sm:text-sm",children:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"flex-1 text-right text-xs sm:text-sm text-muted-foreground flex items-center justify-end",children:["ØªÙ… ØªØ­Ø¯ÙŠØ¯ ",b.length," Ù…Ù† ",y.length]})]})]}),e.jsxs("div",{className:"max-h-80 sm:max-h-96 overflow-y-auto bg-background rounded-xl p-3 sm:p-4",children:[e.jsx("div",{className:"grid gap-2 sm:gap-3",children:y.map(s=>{const l=b.includes(s.id);return e.jsxs("div",{className:`flex items-center space-x-2 sm:space-x-3 space-x-reverse bg-background p-3 sm:p-4 rounded-lg border transition-all duration-200 ${l?"border-primary bg-primary/10 shadow-md":"border-border hover:border-primary hover:bg-primary/10 hover:shadow-sm"}`,children:[e.jsx("input",{type:"checkbox",id:`recipient-${s.id}`,checked:l,onChange:n=>{n.target.checked?I([...b,s.id]):I(b.filter(c=>c!==s.id))},className:"w-4 h-4 sm:w-5 sm:h-5 text-primary border-border rounded focus:ring-primary focus:ring-2 flex-shrink-0"}),e.jsxs("label",{htmlFor:`recipient-${s.id}`,className:"text-xs sm:text-sm text-foreground cursor-pointer flex-1 hover:text-primary transition-colors min-w-0",children:[e.jsx("div",{className:"font-medium truncate",children:s.name}),e.jsxs("div",{className:"text-muted-foreground flex flex-wrap items-center gap-1 sm:gap-2 mt-1",children:[e.jsx("span",{className:"truncate max-w-[120px] sm:max-w-none",children:s.phone}),s.type==="family"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:"whitespace-nowrap",children:[s.members," Ø¹Ø¶Ùˆ"]})]}),e.jsx("span",{children:"â€¢"}),e.jsx(q,{variant:"outline",className:`text-xs ${s.role==="head"||s.role==="admin"&&/^\d+$/.test(s.username)?"border-green-200 text-green-700 bg-green-50":s.role==="root"?"border-blue-200 text-blue-700 bg-blue-50":"border-border text-muted-foreground bg-background"} whitespace-nowrap`,children:s.role==="head"||s.role==="admin"&&/^\d+$/.test(s.username)?"Ø±Ø¨ Ø§Ù„Ø£Ø³Ø±Ø©":s.role==="root"?"Ù…Ø´Ø±Ù Ø±Ø¦ÙŠØ³ÙŠ":s.role==="admin"?"Ù…Ø´Ø±Ù":"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),s.type==="family"&&s.wifePregnant&&e.jsx(q,{variant:"outline",className:"text-xs border-pink-200 text-pink-700 bg-pink-50 whitespace-nowrap",children:"Ø­Ø§Ù…Ù„"}),s.type==="family"&&s.hasChildren&&e.jsxs(q,{variant:"outline",className:"text-xs border-yellow-200 text-yellow-700 bg-yellow-50 whitespace-nowrap",children:[s.childrenCount," Ø·ÙÙ„"]}),s.type==="user"&&e.jsx(q,{variant:"outline",className:"text-xs border-orange-200 text-orange-700 bg-orange-50 whitespace-nowrap",children:"Ø¨Ø¯ÙˆÙ† Ø£Ø³Ø±Ø©"})]})]})]},s.id)})}),y.length===0&&e.jsx("div",{className:"text-center py-6 sm:py-8 text-muted-foreground text-sm sm:text-base px-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø§Ø¦Ù„Ø§Øª Ø£Ùˆ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«"})]}),e.jsxs(ie,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[e.jsx(j,{variant:"outline",onClick:()=>Q(!1),className:"border-border text-foreground hover:bg-background w-full sm:w-auto order-2 sm:order-1",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(j,{onClick:Ie,disabled:X.isPending||b.length===0,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white w-full sm:w-auto order-1 sm:order-2",children:X.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©...":`Ø¥Ø¶Ø§ÙØ© ${b.length} Ù…Ø³ØªÙÙŠØ¯`})]})]})})]})})})}export{ds as default};
