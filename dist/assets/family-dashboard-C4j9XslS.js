import{u as _,a as q,b as ss,r as N,c as S,j as s,i as C,C as a,d as l,U as b,e as d,f as i,L as x,B as h,g as es,h as ts,k as as,l as D,S as L,m as T,n as A,o as g,p as B,q as r,s as F}from"./index-ZYzdAsGm.js";import{B as k,a as ls}from"./dropdown-menu-C5FzIU9D.js";import{H as E}from"./header-qJrll5lw.js";import{F as I}from"./file-text-WTwHpCUH.js";import{C as rs}from"./clock-CAWjKRzy.js";import{S as ns}from"./square-pen-3FzwHCb-.js";import{B as cs}from"./baby-B20HtjzY.js";import{P as ms}from"./printer-CS1Xd9wj.js";import{T as ds}from"./triangle-alert-Dii20Z6F.js";function bs(){const{user:f,isLoading:R}=_();q();const{settings:n}=ss();N.useEffect(()=>{n.siteTitle&&(document.title=n.siteTitle),n.language&&(document.documentElement.lang=n.language,document.body.dir=n.language==="ar"?"rtl":"ltr")},[n.siteTitle,n.language]);const{data:e,isLoading:M}=S({queryKey:["/api/family"]}),{data:c,isLoading:H}=S({queryKey:["/api/requests"]}),{data:m,isLoading:K}=S({queryKey:["/api/notifications"]}),P=R||M||H||K,[o,V]=N.useState("all"),[j,G]=N.useState("all"),[w,U]=N.useState("");if(P)return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(E,{}),s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-lg text-muted-foreground",children:"جاري تحميل البيانات..."})})]});const p=(e==null?void 0:e.members)||[],u=(e==null?void 0:e.orphans)||[],$=p.length;p.filter(t=>t.gender==="male").length,p.filter(t=>t.gender==="female").length;const y=u.length;u.filter(t=>t.gender==="male").length,u.filter(t=>t.gender==="female").length;const O=(e==null?void 0:e.totalMembers)||0;e!=null&&e.numMales,e!=null&&e.numFemales;const Q=(c==null?void 0:c.filter(t=>t.status==="pending"))||[],z=(m==null?void 0:m.slice(0,3))||[],J=p.filter(t=>C(t.birthDate)),W=u.filter(t=>C(t.orphanBirthDate));[...J,...W];const X=[...c||[]].sort((t,v)=>new Date(v.createdAt)-new Date(t.createdAt)).slice(0,3).filter(t=>{const v=t.description.toLowerCase().includes(w.toLowerCase())||t.id.toString().includes(w),Y=o==="all"||t.status===o,Z=j==="all"||t.type===j;return v&&Y&&Z});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(E,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:["مرحباً ",(e==null?void 0:e.husbandName)||(f==null?void 0:f.username)]}),s.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:e?"مرحباً بك في لوحة تحكم بيانات الأسرة":"مرحباً بك في نظام إدارة البيانات العائلية"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[s.jsx(a,{children:s.jsx(l,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-lg",children:s.jsx(b,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),s.jsxs("div",{className:"mr-3 sm:mr-4",children:[s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["إجمالي أفراد الأسرة (الزوج",e!=null&&e.wifeName?" والزوجة":""," + الآخرون)"]}),s.jsxs("p",{className:"text-lg sm:text-xl font-bold text-foreground",children:["المحفوظ: ",O]}),s.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["المحسوب: ",$+1+(e!=null&&e.wifeName?1:0),y>0&&` + ${y} (الأيتام)`]})]})]})})}),s.jsx(a,{children:s.jsx(l,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-lg",children:s.jsx(I,{className:"h-5 w-5 sm:h-6 sm:w-6 text-secondary"})}),s.jsxs("div",{className:"mr-3 sm:mr-4",children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"الطلبات المقدمة"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:(c==null?void 0:c.length)||0})]})]})})}),s.jsx(a,{children:s.jsx(l,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-lg",children:s.jsx(rs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-warning"})}),s.jsxs("div",{className:"mr-3 sm:mr-4",children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"طلبات معلقة"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:Q.length})]})]})})}),s.jsx(a,{children:s.jsx(l,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-red-100 rounded-lg",children:s.jsx(k,{className:"h-5 w-5 sm:h-6 sm:w-6 text-accent"})}),s.jsxs("div",{className:"mr-3 sm:mr-4",children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"تنبيهات جديدة"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:(m==null?void 0:m.length)||0})]})]})})})]}),s.jsxs(a,{className:"mb-6 sm:mb-8",children:[s.jsx(d,{children:s.jsx(i,{className:"text-lg sm:text-xl",children:"الإجراءات السريعة"})}),s.jsx(l,{children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[s.jsx(x,{href:"/dashboard/family",children:s.jsxs(h,{variant:"outline",className:"w-full h-auto p-3 sm:p-4 justify-start",children:[s.jsx(ns,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),s.jsx("span",{className:"text-sm sm:text-base",children:"تحديث بيانات الأسرة"})]})}),s.jsx(x,{href:"/dashboard/members",children:s.jsxs(h,{variant:"outline",className:"w-full h-auto p-3 sm:p-4 justify-start",children:[s.jsx(b,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),s.jsx("span",{className:"text-sm sm:text-base",children:"عرض أفراد الأسرة"})]})}),s.jsx(x,{href:"/dashboard/orphans",children:s.jsxs(h,{variant:"outline",className:"w-full h-auto p-3 sm:p-4 justify-start",children:[s.jsx(cs,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),s.jsx("span",{className:"text-sm sm:text-base",children:"عرض اليتامى"})]})}),s.jsx(x,{href:"/dashboard/requests",children:s.jsxs(h,{variant:"outline",className:"w-full h-auto p-3 sm:p-4 justify-start",children:[s.jsx(I,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),s.jsx("span",{className:"text-sm sm:text-base",children:"إدارة الطلبات"})]})}),s.jsx(x,{href:"/dashboard/notifications",children:s.jsxs(h,{variant:"outline",className:"w-full h-auto p-3 sm:p-4 justify-start",children:[s.jsx(k,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),s.jsx("span",{className:"text-sm sm:text-base",children:"التنبيهات"})]})}),s.jsx(x,{href:"/dashboard/print-summary",children:s.jsxs(h,{variant:"outline",className:"w-full h-auto p-3 sm:p-4 justify-start",children:[s.jsx(ms,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2 sm:ml-3"}),s.jsx("span",{className:"text-sm sm:text-base",children:"طباعة بيانات الأسرة"})]})})]})})]}),((e==null?void 0:e.branch)||(e==null?void 0:e.warDamage2023)||(e==null?void 0:e.socialStatus))&&s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(e==null?void 0:e.branch)&&s.jsxs(a,{children:[s.jsx(d,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-5 w-5 text-blue-500"}),"الفرع"]})}),s.jsx(l,{children:s.jsx("p",{className:"text-gray-700",children:es(e.branch)})})]}),(e==null?void 0:e.warDamage2023)&&s.jsxs(a,{children:[s.jsx(d,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(ds,{className:"h-5 w-5 text-red-500"}),"أضرار 2023"]})}),s.jsx(l,{children:s.jsx("p",{className:"text-gray-700",children:e.warDamageDescription?ts(e.warDamageDescription):"أضرار مسجلة"})})]}),(e==null?void 0:e.socialStatus)&&s.jsxs(a,{children:[s.jsx(d,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(b,{className:"h-5 w-5 text-green-500"}),"الحالة الاجتماعية"]})}),s.jsx(l,{children:s.jsx("p",{className:"text-gray-700",children:as(e.socialStatus)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs(a,{children:[s.jsxs(d,{children:[s.jsx(i,{children:"آخر الطلبات"}),s.jsx(D,{children:"آخر الطلبات المقدمة"})]}),s.jsxs(l,{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2 sm:gap-3 mb-4",children:[s.jsx("input",{type:"text",placeholder:"بحث برقم الطلب أو الوصف...",value:w,onChange:t=>U(t.target.value),className:"flex-1 min-w-0 border rounded px-3 py-2 text-sm"}),s.jsxs(L,{value:o,onValueChange:V,children:[s.jsx(T,{className:"w-full sm:w-36",children:s.jsx(A,{children:o==="all"?"كل الحالات":g(o)})}),s.jsxs(B,{children:[s.jsx(r,{value:"all",children:"كل الحالات"}),s.jsx(r,{value:"pending",children:g("pending")}),s.jsx(r,{value:"approved",children:g("approved")}),s.jsx(r,{value:"rejected",children:g("rejected")})]})]}),s.jsxs(L,{value:j,onValueChange:G,children:[s.jsx(T,{className:"w-full sm:w-36",children:s.jsx(A,{children:j==="all"?"كل الأنواع":F(j)})}),s.jsxs(B,{children:[s.jsx(r,{value:"all",children:"كل الأنواع"}),s.jsx(r,{value:"financial",children:"مساعدة مالية"}),s.jsx(r,{value:"medical",children:"مساعدة طبية"}),s.jsx(r,{value:"damage",children:"تقرير أضرار"})]})]})]}),s.jsx("div",{className:"space-y-3 sm:space-y-4",children:X.map(t=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 sm:p-4 bg-background rounded-lg gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-foreground text-sm sm:text-base",children:F(t.type)}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:new Date(t.createdAt).toLocaleString("ar-EG",{dateStyle:"short",timeStyle:"short"})}),t.adminComment&&s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg border-r-4 border-primary",children:[s.jsx("p",{className:"text-xs font-medium text-foreground",children:"تعليق الإدارة:"}),s.jsx("p",{className:"text-xs text-gray-700 mt-1",children:t.adminComment})]})]}),s.jsx(ls,{variant:t.status==="pending"?"default":t.status==="approved"?"success":"destructive",className:`text-xs sm:text-sm ${t.status==="approved"?"bg-green-600 text-white":t.status==="rejected"?"bg-red-600 text-white":""} shrink-0`,children:g(t.status)})]},t.id))||s.jsx("p",{className:"text-muted-foreground text-center py-4 text-sm sm:text-base",children:"لا توجد طلبات"})})]})]}),s.jsxs(a,{children:[s.jsxs(d,{children:[s.jsx(i,{children:"التنبيهات الأخيرة"}),s.jsx(D,{children:"آخر التنبيهات والرسائل"})]}),s.jsx(l,{children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:z.map(t=>s.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg border-r-4 border-primary",children:[s.jsx("p",{className:"font-medium text-foreground text-sm sm:text-base",children:t.title}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:t.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(t.createdAt).toLocaleString("ar-EG",{dateStyle:"short",timeStyle:"short"})})]},t.id))||s.jsx("p",{className:"text-muted-foreground text-center py-4 text-sm sm:text-base",children:"لا توجد تنبيهات"})})})]})]})]})]})}export{bs as default};
